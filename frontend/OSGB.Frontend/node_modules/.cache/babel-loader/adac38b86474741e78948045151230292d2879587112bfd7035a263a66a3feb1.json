{"ast":null,"code":"var _jsxFileName = \"C:\\\\Users\\\\USER\\\\OneDrive\\\\Desktop\\\\YAZILIM\\\\PRO\\\\OSGB_System\\\\frontend\\\\OSGB.Frontend\\\\src\\\\components\\\\VisitsPage.tsx\",\n  _s = $RefreshSig$();\nimport React, { useState, useEffect, useRef } from 'react';\nimport { useNavigate } from 'react-router-dom';\nimport { io } from 'socket.io-client';\nimport { getAllExperts, getExpertAssignedWorkplaces, getExpertVisits, updateVisitStatus } from '../services/api';\nimport './VisitsPage.css';\nimport { jsxDEV as _jsxDEV } from \"react/jsx-dev-runtime\";\nconst VisitsPage = () => {\n  _s();\n  var _months$;\n  const navigate = useNavigate();\n  const [experts, setExperts] = useState([]);\n  const [selectedExpert, setSelectedExpert] = useState(null);\n  const [workplaces, setWorkplaces] = useState([]);\n  const [visitStatus, setVisitStatus] = useState({});\n  const [loading, setLoading] = useState(true);\n  const [error, setError] = useState('');\n  const [sortOption, setSortOption] = useState('all');\n  const [currentMonthOffset, setCurrentMonthOffset] = useState(0);\n  const socketRef = useRef(null);\n  const selectedExpertRef = useRef(null);\n\n  // Update the ref whenever selectedExpert changes\n  useEffect(() => {\n    selectedExpertRef.current = selectedExpert;\n  }, [selectedExpert]);\n\n  // Get month names for the current, previous, and next months\n  const getMonthNames = () => {\n    const months = [];\n    const currentDate = new Date();\n    for (let i = -1; i <= 1; i++) {\n      const date = new Date(currentDate.getFullYear(), currentDate.getMonth() + currentMonthOffset + i, 1);\n      const monthName = date.toLocaleDateString('tr-TR', {\n        month: 'long',\n        year: 'numeric'\n      });\n      months.push({\n        name: monthName,\n        key: `${date.getFullYear()}-${String(date.getMonth() + 1).padStart(2, '0')}`\n      });\n    }\n    return months;\n  };\n  const months = getMonthNames();\n  useEffect(() => {\n    fetchExperts();\n\n    // Initialize WebSocket connection\n    socketRef.current = io('http://localhost:5001');\n\n    // Listen for visit updates\n    socketRef.current.on('visitUpdate', data => {\n      // Only update if we're viewing the same expert\n      if (selectedExpertRef.current && selectedExpertRef.current.id === data.expertId) {\n        setVisitStatus(prev => ({\n          ...prev,\n          [data.workplaceId]: {\n            ...prev[data.workplaceId],\n            [data.visitMonth]: data.visited\n          }\n        }));\n      }\n    });\n\n    // Clean up WebSocket connection\n    return () => {\n      if (socketRef.current) {\n        socketRef.current.disconnect();\n      }\n    };\n  }, []);\n  useEffect(() => {\n    // Re-fetch data when selected expert changes\n    if (selectedExpert) {\n      fetchWorkplacesForExpert(selectedExpert.id);\n    }\n  }, [selectedExpert]);\n  const fetchExperts = async () => {\n    try {\n      setLoading(true);\n      const data = await getAllExperts();\n      setExperts(data);\n      setError('');\n    } catch (err) {\n      console.error('Error fetching experts:', err);\n      setError('Uzmanlar getirilirken hata oluştu: ' + (err.message || ''));\n    } finally {\n      setLoading(false);\n    }\n  };\n  const fetchWorkplacesForExpert = async expertId => {\n    try {\n      setLoading(true);\n      const [workplacesData, visitsData] = await Promise.all([getExpertAssignedWorkplaces(expertId), getExpertVisits(expertId)]);\n      setWorkplaces(workplacesData);\n      setError('');\n\n      // Initialize visit status from backend data\n      const initialStatus = {};\n      workplacesData.forEach(workplace => {\n        initialStatus[workplace.id] = {};\n        months.forEach(month => {\n          // Check if we have visit data for this workplace and month\n          if (visitsData[workplace.id] && visitsData[workplace.id].visits[month.key]) {\n            initialStatus[workplace.id][month.key] = visitsData[workplace.id].visits[month.key].visited;\n          } else {\n            // Default to not visited if no data exists\n            initialStatus[workplace.id][month.key] = false;\n          }\n        });\n      });\n      setVisitStatus(initialStatus);\n    } catch (err) {\n      console.error('Error fetching data:', err);\n      setError('Veriler getirilirken hata oluştu: ' + (err.message || ''));\n    } finally {\n      setLoading(false);\n    }\n  };\n  const handleExpertSelect = expert => {\n    setSelectedExpert(expert);\n  };\n  const handleBackToExperts = () => {\n    setSelectedExpert(null);\n    setWorkplaces([]);\n    setVisitStatus({});\n  };\n  const toggleVisitStatus = async (workplaceId, monthKey) => {\n    if (!selectedExpert) return;\n    try {\n      var _visitStatus$workplac;\n      // Get the new status (opposite of current)\n      const newStatus = !((_visitStatus$workplac = visitStatus[workplaceId]) !== null && _visitStatus$workplac !== void 0 && _visitStatus$workplac[monthKey]);\n\n      // Update the UI immediately for better UX\n      setVisitStatus(prev => ({\n        ...prev,\n        [workplaceId]: {\n          ...prev[workplaceId],\n          [monthKey]: newStatus\n        }\n      }));\n\n      // Update the backend\n      await updateVisitStatus(selectedExpert.id, workplaceId, monthKey, newStatus);\n    } catch (err) {\n      console.error('Error updating visit status:', err);\n      // Revert the UI change if the backend update failed\n      setVisitStatus(prev => {\n        var _visitStatus$workplac2;\n        return {\n          ...prev,\n          [workplaceId]: {\n            ...prev[workplaceId],\n            [monthKey]: !((_visitStatus$workplac2 = visitStatus[workplaceId]) !== null && _visitStatus$workplac2 !== void 0 && _visitStatus$workplac2[monthKey])\n          }\n        };\n      });\n      setError('Ziyaret durumu güncellenirken hata oluştu: ' + (err.message || ''));\n\n      // Clear error after 3 seconds\n      setTimeout(() => {\n        setError('');\n      }, 3000);\n    }\n  };\n  const filteredWorkplaces = workplaces.filter(workplace => {\n    if (sortOption === 'all') return true;\n    const hasVisitedMonth = months.some(month => {\n      var _visitStatus$workplac3;\n      return ((_visitStatus$workplac3 = visitStatus[workplace.id]) === null || _visitStatus$workplac3 === void 0 ? void 0 : _visitStatus$workplac3[month.key]) === true;\n    });\n    if (sortOption === 'visited') return hasVisitedMonth;\n    if (sortOption === 'not-visited') return !hasVisitedMonth;\n    return true;\n  });\n  const handleMonthChange = offset => {\n    setCurrentMonthOffset(prev => prev + offset);\n  };\n  if (loading) {\n    return /*#__PURE__*/_jsxDEV(\"div\", {\n      className: \"visits-page-container\",\n      children: [/*#__PURE__*/_jsxDEV(\"div\", {\n        className: \"page-header\",\n        children: /*#__PURE__*/_jsxDEV(\"h2\", {\n          children: \"Ziyaretler\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 238,\n          columnNumber: 11\n        }, this)\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 237,\n        columnNumber: 9\n      }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n        className: \"loading\",\n        children: \"Y\\xFCkleniyor...\"\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 240,\n        columnNumber: 9\n      }, this)]\n    }, void 0, true, {\n      fileName: _jsxFileName,\n      lineNumber: 236,\n      columnNumber: 7\n    }, this);\n  }\n  if (error) {\n    return /*#__PURE__*/_jsxDEV(\"div\", {\n      className: \"visits-page-container\",\n      children: [/*#__PURE__*/_jsxDEV(\"div\", {\n        className: \"page-header\",\n        children: /*#__PURE__*/_jsxDEV(\"h2\", {\n          children: \"Ziyaretler\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 249,\n          columnNumber: 11\n        }, this)\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 248,\n        columnNumber: 9\n      }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n        className: \"error\",\n        children: error\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 251,\n        columnNumber: 9\n      }, this), /*#__PURE__*/_jsxDEV(\"button\", {\n        className: \"btn btn-primary\",\n        onClick: () => navigate('/'),\n        children: \"Ana Sayfaya D\\xF6n\"\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 252,\n        columnNumber: 9\n      }, this)]\n    }, void 0, true, {\n      fileName: _jsxFileName,\n      lineNumber: 247,\n      columnNumber: 7\n    }, this);\n  }\n  return /*#__PURE__*/_jsxDEV(\"div\", {\n    className: \"visits-page-container\",\n    children: [/*#__PURE__*/_jsxDEV(\"div\", {\n      className: \"page-header\",\n      children: /*#__PURE__*/_jsxDEV(\"h2\", {\n        children: \"Ziyaretler\"\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 262,\n        columnNumber: 9\n      }, this)\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 261,\n      columnNumber: 7\n    }, this), !selectedExpert ?\n    /*#__PURE__*/\n    // Experts list view\n    _jsxDEV(\"div\", {\n      className: \"experts-list\",\n      children: [/*#__PURE__*/_jsxDEV(\"h3\", {\n        children: \"Kay\\u0131tl\\u0131 Uzmanlar\"\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 268,\n        columnNumber: 11\n      }, this), experts.length === 0 ? /*#__PURE__*/_jsxDEV(\"div\", {\n        className: \"no-workplaces\",\n        children: \"Kay\\u0131tl\\u0131 uzman bulunamad\\u0131\"\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 270,\n        columnNumber: 13\n      }, this) : experts.map(expert => /*#__PURE__*/_jsxDEV(\"div\", {\n        className: \"expert-item\",\n        onClick: () => handleExpertSelect(expert),\n        children: [/*#__PURE__*/_jsxDEV(\"div\", {\n          className: \"expert-info\",\n          children: /*#__PURE__*/_jsxDEV(\"div\", {\n            className: \"expert-name\",\n            children: [expert.firstName, \" \", expert.lastName]\n          }, void 0, true, {\n            fileName: _jsxFileName,\n            lineNumber: 279,\n            columnNumber: 19\n          }, this)\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 278,\n          columnNumber: 17\n        }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n          className: `expert-class ${expert.expertiseClass.toLowerCase()}`,\n          children: [expert.expertiseClass, \" S\\u0131n\\u0131f\\u0131\"]\n        }, void 0, true, {\n          fileName: _jsxFileName,\n          lineNumber: 281,\n          columnNumber: 17\n        }, this)]\n      }, expert.id, true, {\n        fileName: _jsxFileName,\n        lineNumber: 273,\n        columnNumber: 15\n      }, this))]\n    }, void 0, true, {\n      fileName: _jsxFileName,\n      lineNumber: 267,\n      columnNumber: 9\n    }, this) :\n    /*#__PURE__*/\n    // Visits details view\n    _jsxDEV(\"div\", {\n      className: \"visits-details\",\n      children: [/*#__PURE__*/_jsxDEV(\"div\", {\n        className: \"visits-header\",\n        children: [/*#__PURE__*/_jsxDEV(\"h3\", {\n          children: [selectedExpert.firstName, \" \", selectedExpert.lastName, \" - Ziyaret Detaylar\\u0131\"]\n        }, void 0, true, {\n          fileName: _jsxFileName,\n          lineNumber: 292,\n          columnNumber: 13\n        }, this), /*#__PURE__*/_jsxDEV(\"button\", {\n          className: \"back-button\",\n          onClick: handleBackToExperts,\n          children: \"\\u2190 Uzman Listesine D\\xF6n\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 293,\n          columnNumber: 13\n        }, this)]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 291,\n        columnNumber: 11\n      }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n        className: \"month-navigation\",\n        children: [/*#__PURE__*/_jsxDEV(\"button\", {\n          className: \"month-button\",\n          onClick: () => handleMonthChange(-1),\n          children: \"\\u2190 \\xD6nceki Ay\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 299,\n          columnNumber: 13\n        }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n          className: \"current-month\",\n          children: ((_months$ = months[1]) === null || _months$ === void 0 ? void 0 : _months$.name) || 'Geçerli Ay'\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 305,\n          columnNumber: 13\n        }, this), /*#__PURE__*/_jsxDEV(\"button\", {\n          className: \"month-button\",\n          onClick: () => handleMonthChange(1),\n          children: \"Sonraki Ay \\u2192\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 308,\n          columnNumber: 13\n        }, this)]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 298,\n        columnNumber: 11\n      }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n        className: \"sort-controls\",\n        children: [/*#__PURE__*/_jsxDEV(\"button\", {\n          className: `sort-button ${sortOption === 'all' ? 'active' : ''}`,\n          onClick: () => setSortOption('all'),\n          children: \"T\\xFCm \\u0130\\u015F Yerleri\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 317,\n          columnNumber: 13\n        }, this), /*#__PURE__*/_jsxDEV(\"button\", {\n          className: `sort-button ${sortOption === 'visited' ? 'active' : ''}`,\n          onClick: () => setSortOption('visited'),\n          children: \"Ziyaret Edilenler\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 323,\n          columnNumber: 13\n        }, this), /*#__PURE__*/_jsxDEV(\"button\", {\n          className: `sort-button ${sortOption === 'not-visited' ? 'active' : ''}`,\n          onClick: () => setSortOption('not-visited'),\n          children: \"Ziyaret Edilmeyenler\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 329,\n          columnNumber: 13\n        }, this)]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 316,\n        columnNumber: 11\n      }, this), filteredWorkplaces.length === 0 ? /*#__PURE__*/_jsxDEV(\"div\", {\n        className: \"no-workplaces\",\n        children: sortOption === 'all' ? 'Bu uzmana atanmış iş yeri bulunamadı' : sortOption === 'visited' ? 'Henüz ziyaret edilen iş yeri bulunmamaktadır' : 'Ziyaret edilmemiş iş yeri bulunmamaktadır'\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 338,\n        columnNumber: 13\n      }, this) : /*#__PURE__*/_jsxDEV(\"div\", {\n        className: \"workplaces-grid\",\n        children: filteredWorkplaces.map(workplace => /*#__PURE__*/_jsxDEV(\"div\", {\n          className: \"workplace-card\",\n          children: [/*#__PURE__*/_jsxDEV(\"div\", {\n            className: \"workplace-name\",\n            children: workplace.name\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 349,\n            columnNumber: 19\n          }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n            className: \"months-container\",\n            children: months.map(month => {\n              var _visitStatus$workplac4, _visitStatus$workplac5, _visitStatus$workplac6, _visitStatus$workplac7, _visitStatus$workplac8;\n              return /*#__PURE__*/_jsxDEV(\"div\", {\n                className: \"month-section\",\n                children: [/*#__PURE__*/_jsxDEV(\"div\", {\n                  className: \"month-header\",\n                  children: month.name\n                }, void 0, false, {\n                  fileName: _jsxFileName,\n                  lineNumber: 353,\n                  columnNumber: 25\n                }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n                  className: \"visit-status-container\",\n                  children: /*#__PURE__*/_jsxDEV(\"div\", {\n                    className: `visit-status ${(_visitStatus$workplac4 = visitStatus[workplace.id]) !== null && _visitStatus$workplac4 !== void 0 && _visitStatus$workplac4[month.key] ? 'visited' : ((_visitStatus$workplac5 = visitStatus[workplace.id]) === null || _visitStatus$workplac5 === void 0 ? void 0 : _visitStatus$workplac5[month.key]) === false ? 'not-visited' : 'pending'}`,\n                    onClick: () => toggleVisitStatus(workplace.id, month.key),\n                    title: (_visitStatus$workplac6 = visitStatus[workplace.id]) !== null && _visitStatus$workplac6 !== void 0 && _visitStatus$workplac6[month.key] ? 'Ziyaret edildi (değiştirmek için tıklayın)' : ((_visitStatus$workplac7 = visitStatus[workplace.id]) === null || _visitStatus$workplac7 === void 0 ? void 0 : _visitStatus$workplac7[month.key]) === false ? 'Ziyaret edilmedi (değiştirmek için tıklayın)' : 'Durum belirsiz (değiştirmek için tıklayın)',\n                    children: (_visitStatus$workplac8 = visitStatus[workplace.id]) !== null && _visitStatus$workplac8 !== void 0 && _visitStatus$workplac8[month.key] ? '✓' : '✕'\n                  }, void 0, false, {\n                    fileName: _jsxFileName,\n                    lineNumber: 355,\n                    columnNumber: 27\n                  }, this)\n                }, void 0, false, {\n                  fileName: _jsxFileName,\n                  lineNumber: 354,\n                  columnNumber: 25\n                }, this)]\n              }, month.key, true, {\n                fileName: _jsxFileName,\n                lineNumber: 352,\n                columnNumber: 23\n              }, this);\n            })\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 350,\n            columnNumber: 19\n          }, this)]\n        }, workplace.id, true, {\n          fileName: _jsxFileName,\n          lineNumber: 348,\n          columnNumber: 17\n        }, this))\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 346,\n        columnNumber: 13\n      }, this)]\n    }, void 0, true, {\n      fileName: _jsxFileName,\n      lineNumber: 290,\n      columnNumber: 9\n    }, this)]\n  }, void 0, true, {\n    fileName: _jsxFileName,\n    lineNumber: 260,\n    columnNumber: 5\n  }, this);\n};\n_s(VisitsPage, \"sRQrxKFkSFE/RwYhsfnSr5K8PWA=\", false, function () {\n  return [useNavigate];\n});\n_c = VisitsPage;\nexport default VisitsPage;\nvar _c;\n$RefreshReg$(_c, \"VisitsPage\");","map":{"version":3,"names":["React","useState","useEffect","useRef","useNavigate","io","getAllExperts","getExpertAssignedWorkplaces","getExpertVisits","updateVisitStatus","jsxDEV","_jsxDEV","VisitsPage","_s","_months$","navigate","experts","setExperts","selectedExpert","setSelectedExpert","workplaces","setWorkplaces","visitStatus","setVisitStatus","loading","setLoading","error","setError","sortOption","setSortOption","currentMonthOffset","setCurrentMonthOffset","socketRef","selectedExpertRef","current","getMonthNames","months","currentDate","Date","i","date","getFullYear","getMonth","monthName","toLocaleDateString","month","year","push","name","key","String","padStart","fetchExperts","on","data","id","expertId","prev","workplaceId","visitMonth","visited","disconnect","fetchWorkplacesForExpert","err","console","message","workplacesData","visitsData","Promise","all","initialStatus","forEach","workplace","visits","handleExpertSelect","expert","handleBackToExperts","toggleVisitStatus","monthKey","_visitStatus$workplac","newStatus","_visitStatus$workplac2","setTimeout","filteredWorkplaces","filter","hasVisitedMonth","some","_visitStatus$workplac3","handleMonthChange","offset","className","children","fileName","_jsxFileName","lineNumber","columnNumber","onClick","length","map","firstName","lastName","expertiseClass","toLowerCase","_visitStatus$workplac4","_visitStatus$workplac5","_visitStatus$workplac6","_visitStatus$workplac7","_visitStatus$workplac8","title","_c","$RefreshReg$"],"sources":["C:/Users/USER/OneDrive/Desktop/YAZILIM/PRO/OSGB_System/frontend/OSGB.Frontend/src/components/VisitsPage.tsx"],"sourcesContent":["import React, { useState, useEffect, useRef } from 'react';\r\nimport { useNavigate } from 'react-router-dom';\r\nimport { io, Socket } from 'socket.io-client';\r\nimport { getAllExperts, getExpertAssignedWorkplaces, getExpertVisits, updateVisitStatus } from '../services/api';\r\nimport './VisitsPage.css';\r\n\r\ninterface Expert {\r\n  id: number;\r\n  firstName: string;\r\n  lastName: string;\r\n  phone: string;\r\n  expertiseClass: string;\r\n}\r\n\r\ninterface Workplace {\r\n  id: number;\r\n  name: string;\r\n  address: string;\r\n  sskRegistrationNo: string;\r\n  // Add other workplace properties as needed\r\n}\r\n\r\ninterface VisitStatus {\r\n  [workplaceId: number]: {\r\n    [month: string]: boolean; // true if visited, false if not\r\n  };\r\n}\r\n\r\ninterface VisitSummary {\r\n  [workplaceId: number]: {\r\n    workplaceName: string;\r\n    visits: {\r\n      [month: string]: {\r\n        visited: boolean;\r\n        visitDate: string | null;\r\n      };\r\n    };\r\n  };\r\n}\r\n\r\ninterface VisitUpdateData {\r\n  expertId: number;\r\n  workplaceId: number;\r\n  visitMonth: string;\r\n  visited: boolean;\r\n  visitDate: string;\r\n}\r\n\r\nconst VisitsPage: React.FC = () => {\r\n  const navigate = useNavigate();\r\n  const [experts, setExperts] = useState<Expert[]>([]);\r\n  const [selectedExpert, setSelectedExpert] = useState<Expert | null>(null);\r\n  const [workplaces, setWorkplaces] = useState<Workplace[]>([]);\r\n  const [visitStatus, setVisitStatus] = useState<VisitStatus>({});\r\n  const [loading, setLoading] = useState<boolean>(true);\r\n  const [error, setError] = useState<string>('');\r\n  const [sortOption, setSortOption] = useState<'all' | 'visited' | 'not-visited'>('all');\r\n  const [currentMonthOffset, setCurrentMonthOffset] = useState<number>(0);\r\n  const socketRef = useRef<Socket | null>(null);\r\n  const selectedExpertRef = useRef<Expert | null>(null);\r\n\r\n  // Update the ref whenever selectedExpert changes\r\n  useEffect(() => {\r\n    selectedExpertRef.current = selectedExpert;\r\n  }, [selectedExpert]);\r\n\r\n  // Get month names for the current, previous, and next months\r\n  const getMonthNames = () => {\r\n    const months = [];\r\n    const currentDate = new Date();\r\n    \r\n    for (let i = -1; i <= 1; i++) {\r\n      const date = new Date(currentDate.getFullYear(), currentDate.getMonth() + currentMonthOffset + i, 1);\r\n      const monthName = date.toLocaleDateString('tr-TR', { month: 'long', year: 'numeric' });\r\n      months.push({\r\n        name: monthName,\r\n        key: `${date.getFullYear()}-${String(date.getMonth() + 1).padStart(2, '0')}`\r\n      });\r\n    }\r\n    \r\n    return months;\r\n  };\r\n\r\n  const months = getMonthNames();\r\n\r\n  useEffect(() => {\r\n    fetchExperts();\r\n    \r\n    // Initialize WebSocket connection\r\n    socketRef.current = io('http://localhost:5001');\r\n    \r\n    // Listen for visit updates\r\n    socketRef.current.on('visitUpdate', (data: VisitUpdateData) => {\r\n      // Only update if we're viewing the same expert\r\n      if (selectedExpertRef.current && selectedExpertRef.current.id === data.expertId) {\r\n        setVisitStatus(prev => ({\r\n          ...prev,\r\n          [data.workplaceId]: {\r\n            ...prev[data.workplaceId],\r\n            [data.visitMonth]: data.visited\r\n          }\r\n        }));\r\n      }\r\n    });\r\n    \r\n    // Clean up WebSocket connection\r\n    return () => {\r\n      if (socketRef.current) {\r\n        socketRef.current.disconnect();\r\n      }\r\n    };\r\n  }, []);\r\n\r\n  useEffect(() => {\r\n    // Re-fetch data when selected expert changes\r\n    if (selectedExpert) {\r\n      fetchWorkplacesForExpert(selectedExpert.id);\r\n    }\r\n  }, [selectedExpert]);\r\n\r\n  const fetchExperts = async () => {\r\n    try {\r\n      setLoading(true);\r\n      const data = await getAllExperts();\r\n      setExperts(data);\r\n      setError('');\r\n    } catch (err: any) {\r\n      console.error('Error fetching experts:', err);\r\n      setError('Uzmanlar getirilirken hata oluştu: ' + (err.message || ''));\r\n    } finally {\r\n      setLoading(false);\r\n    }\r\n  };\r\n\r\n  const fetchWorkplacesForExpert = async (expertId: number) => {\r\n    try {\r\n      setLoading(true);\r\n      const [workplacesData, visitsData] = await Promise.all([\r\n        getExpertAssignedWorkplaces(expertId),\r\n        getExpertVisits(expertId)\r\n      ]);\r\n      \r\n      setWorkplaces(workplacesData);\r\n      setError('');\r\n      \r\n      // Initialize visit status from backend data\r\n      const initialStatus: VisitStatus = {};\r\n      workplacesData.forEach((workplace: Workplace) => {\r\n        initialStatus[workplace.id] = {};\r\n        months.forEach(month => {\r\n          // Check if we have visit data for this workplace and month\r\n          if (visitsData[workplace.id] && visitsData[workplace.id].visits[month.key]) {\r\n            initialStatus[workplace.id][month.key] = visitsData[workplace.id].visits[month.key].visited;\r\n          } else {\r\n            // Default to not visited if no data exists\r\n            initialStatus[workplace.id][month.key] = false;\r\n          }\r\n        });\r\n      });\r\n      setVisitStatus(initialStatus);\r\n    } catch (err: any) {\r\n      console.error('Error fetching data:', err);\r\n      setError('Veriler getirilirken hata oluştu: ' + (err.message || ''));\r\n    } finally {\r\n      setLoading(false);\r\n    }\r\n  };\r\n\r\n  const handleExpertSelect = (expert: Expert) => {\r\n    setSelectedExpert(expert);\r\n  };\r\n\r\n  const handleBackToExperts = () => {\r\n    setSelectedExpert(null);\r\n    setWorkplaces([]);\r\n    setVisitStatus({});\r\n  };\r\n\r\n  const toggleVisitStatus = async (workplaceId: number, monthKey: string) => {\r\n    if (!selectedExpert) return;\r\n    \r\n    try {\r\n      // Get the new status (opposite of current)\r\n      const newStatus = !visitStatus[workplaceId]?.[monthKey];\r\n      \r\n      // Update the UI immediately for better UX\r\n      setVisitStatus(prev => ({\r\n        ...prev,\r\n        [workplaceId]: {\r\n          ...prev[workplaceId],\r\n          [monthKey]: newStatus\r\n        }\r\n      }));\r\n      \r\n      // Update the backend\r\n      await updateVisitStatus(selectedExpert.id, workplaceId, monthKey, newStatus);\r\n    } catch (err: any) {\r\n      console.error('Error updating visit status:', err);\r\n      // Revert the UI change if the backend update failed\r\n      setVisitStatus(prev => ({\r\n        ...prev,\r\n        [workplaceId]: {\r\n          ...prev[workplaceId],\r\n          [monthKey]: !visitStatus[workplaceId]?.[monthKey]\r\n        }\r\n      }));\r\n      \r\n      setError('Ziyaret durumu güncellenirken hata oluştu: ' + (err.message || ''));\r\n      \r\n      // Clear error after 3 seconds\r\n      setTimeout(() => {\r\n        setError('');\r\n      }, 3000);\r\n    }\r\n  };\r\n\r\n  const filteredWorkplaces = workplaces.filter(workplace => {\r\n    if (sortOption === 'all') return true;\r\n    \r\n    const hasVisitedMonth = months.some(month => \r\n      visitStatus[workplace.id]?.[month.key] === true\r\n    );\r\n    \r\n    if (sortOption === 'visited') return hasVisitedMonth;\r\n    if (sortOption === 'not-visited') return !hasVisitedMonth;\r\n    \r\n    return true;\r\n  });\r\n\r\n  const handleMonthChange = (offset: number) => {\r\n    setCurrentMonthOffset(prev => prev + offset);\r\n  };\r\n\r\n  if (loading) {\r\n    return (\r\n      <div className=\"visits-page-container\">\r\n        <div className=\"page-header\">\r\n          <h2>Ziyaretler</h2>\r\n        </div>\r\n        <div className=\"loading\">Yükleniyor...</div>\r\n      </div>\r\n    );\r\n  }\r\n\r\n  if (error) {\r\n    return (\r\n      <div className=\"visits-page-container\">\r\n        <div className=\"page-header\">\r\n          <h2>Ziyaretler</h2>\r\n        </div>\r\n        <div className=\"error\">{error}</div>\r\n        <button className=\"btn btn-primary\" onClick={() => navigate('/')}>\r\n          Ana Sayfaya Dön\r\n        </button>\r\n      </div>\r\n    );\r\n  }\r\n\r\n  return (\r\n    <div className=\"visits-page-container\">\r\n      <div className=\"page-header\">\r\n        <h2>Ziyaretler</h2>\r\n      </div>\r\n\r\n      {!selectedExpert ? (\r\n        // Experts list view\r\n        <div className=\"experts-list\">\r\n          <h3>Kayıtlı Uzmanlar</h3>\r\n          {experts.length === 0 ? (\r\n            <div className=\"no-workplaces\">Kayıtlı uzman bulunamadı</div>\r\n          ) : (\r\n            experts.map(expert => (\r\n              <div \r\n                key={expert.id} \r\n                className=\"expert-item\"\r\n                onClick={() => handleExpertSelect(expert)}\r\n              >\r\n                <div className=\"expert-info\">\r\n                  <div className=\"expert-name\">{expert.firstName} {expert.lastName}</div>\r\n                </div>\r\n                <div className={`expert-class ${expert.expertiseClass.toLowerCase()}`}>\r\n                  {expert.expertiseClass} Sınıfı\r\n                </div>\r\n              </div>\r\n            ))\r\n          )}\r\n        </div>\r\n      ) : (\r\n        // Visits details view\r\n        <div className=\"visits-details\">\r\n          <div className=\"visits-header\">\r\n            <h3>{selectedExpert.firstName} {selectedExpert.lastName} - Ziyaret Detayları</h3>\r\n            <button className=\"back-button\" onClick={handleBackToExperts}>\r\n              ← Uzman Listesine Dön\r\n            </button>\r\n          </div>\r\n\r\n          <div className=\"month-navigation\">\r\n            <button \r\n              className=\"month-button\" \r\n              onClick={() => handleMonthChange(-1)}\r\n            >\r\n              ← Önceki Ay\r\n            </button>\r\n            <div className=\"current-month\">\r\n              {months[1]?.name || 'Geçerli Ay'}\r\n            </div>\r\n            <button \r\n              className=\"month-button\" \r\n              onClick={() => handleMonthChange(1)}\r\n            >\r\n              Sonraki Ay →\r\n            </button>\r\n          </div>\r\n\r\n          <div className=\"sort-controls\">\r\n            <button \r\n              className={`sort-button ${sortOption === 'all' ? 'active' : ''}`}\r\n              onClick={() => setSortOption('all')}\r\n            >\r\n              Tüm İş Yerleri\r\n            </button>\r\n            <button \r\n              className={`sort-button ${sortOption === 'visited' ? 'active' : ''}`}\r\n              onClick={() => setSortOption('visited')}\r\n            >\r\n              Ziyaret Edilenler\r\n            </button>\r\n            <button \r\n              className={`sort-button ${sortOption === 'not-visited' ? 'active' : ''}`}\r\n              onClick={() => setSortOption('not-visited')}\r\n            >\r\n              Ziyaret Edilmeyenler\r\n            </button>\r\n          </div>\r\n\r\n          {filteredWorkplaces.length === 0 ? (\r\n            <div className=\"no-workplaces\">\r\n              {sortOption === 'all' \r\n                ? 'Bu uzmana atanmış iş yeri bulunamadı' \r\n                : sortOption === 'visited' \r\n                  ? 'Henüz ziyaret edilen iş yeri bulunmamaktadır' \r\n                  : 'Ziyaret edilmemiş iş yeri bulunmamaktadır'}\r\n            </div>\r\n          ) : (\r\n            <div className=\"workplaces-grid\">\r\n              {filteredWorkplaces.map(workplace => (\r\n                <div key={workplace.id} className=\"workplace-card\">\r\n                  <div className=\"workplace-name\">{workplace.name}</div>\r\n                  <div className=\"months-container\">\r\n                    {months.map(month => (\r\n                      <div key={month.key} className=\"month-section\">\r\n                        <div className=\"month-header\">{month.name}</div>\r\n                        <div className=\"visit-status-container\">\r\n                          <div \r\n                            className={`visit-status ${\r\n                              visitStatus[workplace.id]?.[month.key] \r\n                                ? 'visited' \r\n                                : visitStatus[workplace.id]?.[month.key] === false \r\n                                  ? 'not-visited' \r\n                                  : 'pending'\r\n                            }`}\r\n                            onClick={() => toggleVisitStatus(workplace.id, month.key)}\r\n                            title={\r\n                              visitStatus[workplace.id]?.[month.key] \r\n                                ? 'Ziyaret edildi (değiştirmek için tıklayın)' \r\n                                : visitStatus[workplace.id]?.[month.key] === false \r\n                                  ? 'Ziyaret edilmedi (değiştirmek için tıklayın)' \r\n                                  : 'Durum belirsiz (değiştirmek için tıklayın)'\r\n                            }\r\n                          >\r\n                            {visitStatus[workplace.id]?.[month.key] ? '✓' : '✕'}\r\n                          </div>\r\n                        </div>\r\n                      </div>\r\n                    ))}\r\n                  </div>\r\n                </div>\r\n              ))}\r\n            </div>\r\n          )}\r\n        </div>\r\n      )}\r\n    </div>\r\n  );\r\n};\r\n\r\nexport default VisitsPage;"],"mappings":"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","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}