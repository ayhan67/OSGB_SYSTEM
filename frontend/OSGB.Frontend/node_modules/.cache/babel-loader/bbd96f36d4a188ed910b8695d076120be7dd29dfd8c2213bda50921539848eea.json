{"ast":null,"code":"import _objectSpread from\"C:/Users/USER/OneDrive/Desktop/YAZILIM/PRO/OSGB_System/frontend/OSGB.Frontend/node_modules/@babel/runtime/helpers/esm/objectSpread2.js\";import React,{useState,useEffect,useCallback}from'react';import{useLocation}from'react-router-dom';import'./WorkplacePage.css';import{getAllWorkplaces,getAllExperts,getAllDoctors,getAllDsps,updateWorkplace,deleteWorkplace}from'../services/api';// Define types\nimport{jsx as _jsx,jsxs as _jsxs}from\"react/jsx-runtime\";const WorkplacePage=()=>{console.log('WorkplacePage component rendered at:',new Date().toISOString());const location=useLocation();// State declarations\nconst[workplaces,setWorkplaces]=useState([]);const[allExperts,setAllExperts]=useState([]);const[allDoctors,setAllDoctors]=useState([]);const[allDsps,setAllDsps]=useState([]);const[success,setSuccess]=useState('');const[error,setError]=useState('');const[isModalOpen,setIsModalOpen]=useState(false);const[modalFormData,setModalFormData]=useState({});const[showDeleteConfirmation,setShowDeleteConfirmation]=useState(false);// Function to fetch all data\nconst fetchAllData=useCallback(async()=>{try{console.log('Fetching all data from backend...');// Fetch all data in parallel\nconst[workplacesData,expertsData,doctorsData,dspsData]=await Promise.all([getAllWorkplaces(),getAllExperts(),getAllDoctors(),getAllDsps()]);console.log('Received all data:',{workplacesCount:workplacesData.length,expertsCount:expertsData.length,doctorsCount:doctorsData.length,dspsCount:dspsData.length});// Filter only approved workplaces (onaylandi)\nconst approvedWorkplaces=workplacesData.filter(workplace=>workplace.approvalStatus==='onaylandi');console.log('Approved workplaces count:',approvedWorkplaces.length);// Update all state\nsetWorkplaces(approvedWorkplaces);setAllExperts(expertsData);setAllDoctors(doctorsData);setAllDsps(dspsData);console.log('State updated after data fetch');}catch(error){console.error('Error fetching data:',error);setError('Veri alınırken hata oluştu');}},[]);// Load all data from backend on component mount\nuseEffect(()=>{console.log('WorkplacePage useEffect running - fetching all data at:',new Date().toISOString());fetchAllData();},[]);// Refresh data when location changes\nuseEffect(()=>{console.log('Location changed to:',location.pathname,'at:',new Date().toISOString());fetchAllData();},[location.pathname]);// Refresh data when window regains focus\nuseEffect(()=>{const handleFocus=()=>{console.log('Window focused, refreshing all data...');fetchAllData();};window.addEventListener('focus',handleFocus);return()=>{window.removeEventListener('focus',handleFocus);};},[]);// Clear notifications after timeout\nconst clearNotifications=()=>{setTimeout(()=>{setSuccess('');setError('');},3000);};// Function to format risk level in Turkish\nconst formatRiskLevel=riskLevel=>{switch(riskLevel){case'low':return'Az Tehlikeli';case'dangerous':return'Tehlikeli';case'veryDangerous':return'Çok Tehlikeli';default:return'Belirtilmemiş';}};// Function to get expert name by ID\nconst getExpertName=(expertId,workplace)=>{// First try to get name from included data in workplace\nif(workplace&&workplace.Expert){console.log('Using included Expert data:',workplace.Expert);// Check if firstName and lastName exist\nif(workplace.Expert.firstName&&workplace.Expert.lastName){return\"\".concat(workplace.Expert.firstName,\" \").concat(workplace.Expert.lastName);}}// Fallback to lookup in allExperts array\nif(!expertId)return'Atanmamış';const expert=allExperts.find(expert=>expert.id===parseInt(expertId));if(expert&&expert.firstName&&expert.lastName){return\"\".concat(expert.firstName,\" \").concat(expert.lastName);}return'Bilinmeyen Uzman';};// Function to get doctor name by ID\nconst getDoctorName=(doctorId,workplace)=>{// First try to get name from included data in workplace\nif(workplace&&workplace.Doctor){console.log('Using included Doctor data:',workplace.Doctor);// Check if firstName and lastName exist\nif(workplace.Doctor.firstName&&workplace.Doctor.lastName){return\"\".concat(workplace.Doctor.firstName,\" \").concat(workplace.Doctor.lastName);}}// Fallback to lookup in allDoctors array\nif(!doctorId)return'Atanmamış';const doctor=allDoctors.find(doctor=>doctor.id===parseInt(doctorId));if(doctor&&doctor.firstName&&doctor.lastName){return\"\".concat(doctor.firstName,\" \").concat(doctor.lastName);}return'Bilinmeyen Hekim';};// Function to get DSP name by ID\nconst getDspName=(dspId,workplace)=>{// First try to get name from included data in workplace\nif(workplace&&workplace.Dsp){console.log('Using included Dsp data:',workplace.Dsp);// Check if firstName and lastName exist\nif(workplace.Dsp.firstName&&workplace.Dsp.lastName){return\"\".concat(workplace.Dsp.firstName,\" \").concat(workplace.Dsp.lastName);}}// Fallback to lookup in allDsps array\nif(!dspId)return'Atanmamış';const dsp=allDsps.find(dsp=>dsp.id===parseInt(dspId));if(dsp&&dsp.firstName&&dsp.lastName){return\"\".concat(dsp.firstName,\" \").concat(dsp.lastName);}return'Bilinmeyen DSP';};const handleRowClick=workplace=>{setModalFormData(workplace);setIsModalOpen(true);// Prevent background scrolling when modal is open\ndocument.body.style.overflow='hidden';};const handleModalChange=e=>{const{name,value}=e.target;setModalFormData(prev=>_objectSpread(_objectSpread({},prev),{},{[name]:value}));};const handleModalSubmit=async e=>{e.preventDefault();try{if(modalFormData.id){// Ensure all required fields are included and handle null values for assigned IDs\nconst workplaceData=_objectSpread(_objectSpread({},modalFormData),{},{// Handle null values for assigned IDs\nassignedExpertId:modalFormData.assignedExpertId||null,assignedDoctorId:modalFormData.assignedDoctorId||null,assignedDspId:modalFormData.assignedDspId||null});// Update existing workplace\nconst updatedWorkplace=await updateWorkplace(modalFormData.id,workplaceData);// Show success message\nsetSuccess('İş yeri başarıyla güncellendi!');// Close modal first\nsetIsModalOpen(false);// Refresh all data from backend to ensure consistency\nawait fetchAllData();// Clear notifications\nclearNotifications();}}catch(error){console.error('Error updating workplace:',error);// Provide more specific error message\nif(error.message){setError(\"\\u0130\\u015F yeri g\\xFCncellenirken hata olu\\u015Ftu: \".concat(error.message));}else{setError('İş yeri güncellenirken hata oluştu');}clearNotifications();}};const handleDeleteWorkplace=()=>{// Show confirmation dialog before deleting\nsetShowDeleteConfirmation(true);};// Function to confirm deletion\nconst confirmDeleteWorkplace=async()=>{try{if(modalFormData.id){// Delete from backend\nawait deleteWorkplace(modalFormData.id);// Show success message\nsetSuccess('İş yeri başarıyla silindi!');// Close confirmation dialog and modal\nsetShowDeleteConfirmation(false);closeModal();// Refresh all data from backend to ensure consistency\nawait fetchAllData();// Clear notifications\nclearNotifications();}else{setShowDeleteConfirmation(false);closeModal();}}catch(error){console.error('Error deleting workplace:',error);// Provide more specific error message\nif(error.message){setError(\"\\u0130\\u015F yeri silinirken hata olu\\u015Ftu: \".concat(error.message));}else{setError('İş yeri silinirken hata oluştu');}clearNotifications();}};// Function to cancel deletion\nconst cancelDeleteWorkplace=()=>{setShowDeleteConfirmation(false);};// Function to close modal\nconst closeModal=()=>{setIsModalOpen(false);setModalFormData({});// Allow background scrolling when modal is closed\ndocument.body.style.overflow='auto';};return/*#__PURE__*/_jsxs(\"div\",{className:\"workplace-page-container\",children:[success&&/*#__PURE__*/_jsx(\"div\",{className:\"popup-notification alert alert-info\",children:success}),error&&/*#__PURE__*/_jsx(\"div\",{className:\"popup-notification alert alert-warning\",children:error}),showDeleteConfirmation&&/*#__PURE__*/_jsx(\"div\",{className:\"popup-overlay\",onClick:cancelDeleteWorkplace,children:/*#__PURE__*/_jsxs(\"div\",{className:\"popup-content\",onClick:e=>e.stopPropagation(),children:[/*#__PURE__*/_jsxs(\"div\",{className:\"popup-header\",children:[/*#__PURE__*/_jsx(\"h3\",{children:\"Kay\\u0131t Silme Onay\\u0131\"}),/*#__PURE__*/_jsx(\"button\",{className:\"popup-close\",onClick:cancelDeleteWorkplace,children:\"\\xD7\"})]}),/*#__PURE__*/_jsx(\"div\",{className:\"popup-body\",children:/*#__PURE__*/_jsx(\"p\",{children:\"Kay\\u0131d\\u0131 ger\\xE7ekten silmek istiyor musunuz?\"})}),/*#__PURE__*/_jsxs(\"div\",{className:\"popup-footer\",children:[/*#__PURE__*/_jsx(\"button\",{className:\"btn btn-secondary\",onClick:cancelDeleteWorkplace,children:\"\\u0130ptal\"}),/*#__PURE__*/_jsx(\"button\",{className:\"btn btn-danger\",onClick:confirmDeleteWorkplace,children:\"Sil\"})]})]})}),/*#__PURE__*/_jsxs(\"div\",{className:\"workplace-page-content\",children:[/*#__PURE__*/_jsx(\"h2\",{className:\"page-title\",children:\"Onaylanm\\u0131\\u015F \\u0130\\u015F Yerleri\"}),/*#__PURE__*/_jsxs(\"div\",{className:\"workplaces-container\",children:[/*#__PURE__*/_jsxs(\"div\",{className:\"header-row\",children:[/*#__PURE__*/_jsx(\"div\",{className:\"header-cell\",children:\"\\u0130\\u015F Yeri Ad\\u0131\"}),/*#__PURE__*/_jsx(\"div\",{className:\"header-cell\",children:\"Sicil No\"}),/*#__PURE__*/_jsx(\"div\",{className:\"header-cell\",children:\"Tehlike S\\u0131n\\u0131f\\u0131\"}),/*#__PURE__*/_jsx(\"div\",{className:\"header-cell\",children:\"Atanan Uzman\"}),/*#__PURE__*/_jsx(\"div\",{className:\"header-cell\",children:\"Atanan Hekim\"}),/*#__PURE__*/_jsx(\"div\",{className:\"header-cell\",children:\"Atanan DSP\"})]}),/*#__PURE__*/_jsxs(\"div\",{className:\"workplaces-list\",children:[workplaces.map(workplace=>/*#__PURE__*/_jsxs(\"div\",{className:\"workplace-row\",onClick:()=>handleRowClick(workplace),children:[/*#__PURE__*/_jsx(\"div\",{className:\"workplace-cell\",children:workplace.name}),/*#__PURE__*/_jsx(\"div\",{className:\"workplace-cell\",children:workplace.sskRegistrationNo}),/*#__PURE__*/_jsx(\"div\",{className:\"workplace-cell\",children:formatRiskLevel(workplace.riskLevel)}),/*#__PURE__*/_jsx(\"div\",{className:\"workplace-cell\",children:getExpertName(workplace.assignedExpertId,workplace)}),/*#__PURE__*/_jsx(\"div\",{className:\"workplace-cell\",children:getDoctorName(workplace.assignedDoctorId,workplace)}),/*#__PURE__*/_jsx(\"div\",{className:\"workplace-cell\",children:getDspName(workplace.assignedDspId,workplace)})]},workplace.id)),workplaces.length===0&&/*#__PURE__*/_jsx(\"div\",{className:\"no-workplaces\",children:\"Onaylanm\\u0131\\u015F i\\u015F yeri bulunmamaktad\\u0131r.\"})]})]})]}),isModalOpen&&/*#__PURE__*/_jsx(\"div\",{className:\"modal-overlay\",onClick:closeModal,children:/*#__PURE__*/_jsxs(\"div\",{className:\"modal-content\",onClick:e=>e.stopPropagation(),children:[/*#__PURE__*/_jsxs(\"div\",{className:\"modal-header\",children:[/*#__PURE__*/_jsx(\"h3\",{children:\"Kay\\u0131tl\\u0131 Uzman Kart\\u0131\"}),/*#__PURE__*/_jsx(\"button\",{className:\"modal-close\",onClick:closeModal,children:\"\\xD7\"})]}),/*#__PURE__*/_jsx(\"div\",{className:\"modal-body\",children:/*#__PURE__*/_jsxs(\"form\",{onSubmit:handleModalSubmit,children:[/*#__PURE__*/_jsxs(\"div\",{className:\"form-row\",children:[/*#__PURE__*/_jsx(\"div\",{className:\"form-col\",children:/*#__PURE__*/_jsxs(\"div\",{className:\"form-group\",children:[/*#__PURE__*/_jsx(\"label\",{className:\"form-label\",children:\"\\u0130\\u015F Yeri Ad\\u0131:\"}),/*#__PURE__*/_jsx(\"input\",{type:\"text\",name:\"name\",value:modalFormData.name||'',onChange:handleModalChange,className:\"form-input\",readOnly:true})]})}),/*#__PURE__*/_jsx(\"div\",{className:\"form-col\",children:/*#__PURE__*/_jsxs(\"div\",{className:\"form-group\",children:[/*#__PURE__*/_jsx(\"label\",{className:\"form-label\",children:\"SGK \\u0130\\u015Fyeri Sicil No:\"}),/*#__PURE__*/_jsx(\"input\",{type:\"text\",name:\"sskRegistrationNo\",value:modalFormData.sskRegistrationNo||'',onChange:handleModalChange,className:\"form-input\",readOnly:true})]})})]}),/*#__PURE__*/_jsx(\"div\",{className:\"form-row\",children:/*#__PURE__*/_jsx(\"div\",{className:\"form-col\",children:/*#__PURE__*/_jsxs(\"div\",{className:\"form-group\",children:[/*#__PURE__*/_jsx(\"label\",{className:\"form-label\",children:\"Tehlike S\\u0131n\\u0131f\\u0131:\"}),/*#__PURE__*/_jsx(\"input\",{type:\"text\",name:\"riskLevel\",value:modalFormData.riskLevel?formatRiskLevel(modalFormData.riskLevel):'',onChange:handleModalChange,className:\"form-input\",readOnly:true})]})})}),/*#__PURE__*/_jsxs(\"div\",{className:\"form-row\",children:[/*#__PURE__*/_jsx(\"div\",{className:\"form-col\",children:/*#__PURE__*/_jsxs(\"div\",{className:\"form-group\",children:[/*#__PURE__*/_jsx(\"label\",{className:\"form-label\",children:\"Atanan Uzman:\"}),/*#__PURE__*/_jsxs(\"select\",{name:\"assignedExpertId\",value:modalFormData.assignedExpertId||'',onChange:handleModalChange,className:\"form-select\",children:[/*#__PURE__*/_jsx(\"option\",{value:\"\",children:\"Se\\xE7iniz\"}),allExperts.map(expert=>/*#__PURE__*/_jsxs(\"option\",{value:expert.id,children:[expert.firstName,\" \",expert.lastName]},expert.id))]})]})}),/*#__PURE__*/_jsx(\"div\",{className:\"form-col\",children:/*#__PURE__*/_jsxs(\"div\",{className:\"form-group\",children:[/*#__PURE__*/_jsx(\"label\",{className:\"form-label\",children:\"Atanan Hekim:\"}),/*#__PURE__*/_jsxs(\"select\",{name:\"assignedDoctorId\",value:modalFormData.assignedDoctorId||'',onChange:handleModalChange,className:\"form-select\",children:[/*#__PURE__*/_jsx(\"option\",{value:\"\",children:\"Se\\xE7iniz\"}),allDoctors.map(doctor=>/*#__PURE__*/_jsxs(\"option\",{value:doctor.id,children:[doctor.firstName,\" \",doctor.lastName]},doctor.id))]})]})})]}),/*#__PURE__*/_jsx(\"div\",{className:\"form-row\",children:/*#__PURE__*/_jsx(\"div\",{className:\"form-col\",children:/*#__PURE__*/_jsxs(\"div\",{className:\"form-group\",children:[/*#__PURE__*/_jsx(\"label\",{className:\"form-label\",children:\"Atanan DSP:\"}),/*#__PURE__*/_jsxs(\"select\",{name:\"assignedDspId\",value:modalFormData.assignedDspId||'',onChange:handleModalChange,className:\"form-select\",children:[/*#__PURE__*/_jsx(\"option\",{value:\"\",children:\"Se\\xE7iniz\"}),allDsps.map(dsp=>/*#__PURE__*/_jsxs(\"option\",{value:dsp.id,children:[dsp.firstName,\" \",dsp.lastName]},dsp.id))]})]})})}),/*#__PURE__*/_jsxs(\"div\",{className:\"modal-actions\",children:[/*#__PURE__*/_jsx(\"button\",{type:\"button\",className:\"btn btn-danger\",onClick:handleDeleteWorkplace,children:\"Sil\"}),/*#__PURE__*/_jsx(\"button\",{type:\"button\",className:\"btn btn-secondary\",onClick:closeModal,children:\"\\u0130ptal\"}),/*#__PURE__*/_jsx(\"button\",{type:\"submit\",className:\"btn btn-primary\",children:\"G\\xFCncelle\"})]})]})})]})})]});};export default WorkplacePage;","map":{"version":3,"names":["React","useState","useEffect","useCallback","useLocation","getAllWorkplaces","getAllExperts","getAllDoctors","getAllDsps","updateWorkplace","deleteWorkplace","jsx","_jsx","jsxs","_jsxs","WorkplacePage","console","log","Date","toISOString","location","workplaces","setWorkplaces","allExperts","setAllExperts","allDoctors","setAllDoctors","allDsps","setAllDsps","success","setSuccess","error","setError","isModalOpen","setIsModalOpen","modalFormData","setModalFormData","showDeleteConfirmation","setShowDeleteConfirmation","fetchAllData","workplacesData","expertsData","doctorsData","dspsData","Promise","all","workplacesCount","length","expertsCount","doctorsCount","dspsCount","approvedWorkplaces","filter","workplace","approvalStatus","pathname","handleFocus","window","addEventListener","removeEventListener","clearNotifications","setTimeout","formatRiskLevel","riskLevel","getExpertName","expertId","Expert","firstName","lastName","concat","expert","find","id","parseInt","getDoctorName","doctorId","Doctor","doctor","getDspName","dspId","Dsp","dsp","handleRowClick","document","body","style","overflow","handleModalChange","e","name","value","target","prev","_objectSpread","handleModalSubmit","preventDefault","workplaceData","assignedExpertId","assignedDoctorId","assignedDspId","updatedWorkplace","message","handleDeleteWorkplace","confirmDeleteWorkplace","closeModal","cancelDeleteWorkplace","className","children","onClick","stopPropagation","map","sskRegistrationNo","onSubmit","type","onChange","readOnly"],"sources":["C:/Users/USER/OneDrive/Desktop/YAZILIM/PRO/OSGB_System/frontend/OSGB.Frontend/src/components/WorkplacePage.tsx"],"sourcesContent":["import React, { useState, useEffect, useCallback } from 'react';\r\nimport { useLocation } from 'react-router-dom';\r\nimport './WorkplacePage.css';\r\nimport { getAllWorkplaces, getAllExperts, getAllDoctors, getAllDsps, updateWorkplace, deleteWorkplace } from '../services/api';\r\n\r\n// Define types\r\ninterface Workplace {\r\n  id: number;\r\n  name: string;\r\n  sskRegistrationNo: string;\r\n  riskLevel: string;\r\n  assignedExpertId: string;\r\n  assignedDoctorId: string;\r\n  assignedDspId: string;\r\n  // Add optional personnel objects that will be included from backend\r\n  Expert?: {\r\n    id: number;\r\n    firstName: string;\r\n    lastName: string;\r\n  } | null;\r\n  Doctor?: {\r\n    id: number;\r\n    firstName: string;\r\n    lastName: string;\r\n  } | null;\r\n  Dsp?: {\r\n    id: number;\r\n    firstName: string;\r\n    lastName: string;\r\n  } | null;\r\n}\r\n\r\nconst WorkplacePage: React.FC = () => {\r\n  console.log('WorkplacePage component rendered at:', new Date().toISOString());\r\n  const location = useLocation();\r\n  \r\n  // State declarations\r\n  const [workplaces, setWorkplaces] = useState<Workplace[]>([]);\r\n  const [allExperts, setAllExperts] = useState<any[]>([]);\r\n  const [allDoctors, setAllDoctors] = useState<any[]>([]);\r\n  const [allDsps, setAllDsps] = useState<any[]>([]);\r\n  const [success, setSuccess] = useState('');\r\n  const [error, setError] = useState('');\r\n  const [isModalOpen, setIsModalOpen] = useState<boolean>(false);\r\n  const [modalFormData, setModalFormData] = useState<Partial<Workplace>>({});\r\n  const [showDeleteConfirmation, setShowDeleteConfirmation] = useState<boolean>(false);\r\n\r\n  // Function to fetch all data\r\n  const fetchAllData = useCallback(async () => {\r\n    try {\r\n      console.log('Fetching all data from backend...');\r\n      \r\n      // Fetch all data in parallel\r\n      const [workplacesData, expertsData, doctorsData, dspsData] = await Promise.all([\r\n        getAllWorkplaces(),\r\n        getAllExperts(),\r\n        getAllDoctors(),\r\n        getAllDsps()\r\n      ]);\r\n      \r\n      console.log('Received all data:', { \r\n        workplacesCount: workplacesData.length, \r\n        expertsCount: expertsData.length, \r\n        doctorsCount: doctorsData.length, \r\n        dspsCount: dspsData.length \r\n      });\r\n      \r\n      // Filter only approved workplaces (onaylandi)\r\n      const approvedWorkplaces = workplacesData.filter((workplace: Workplace) => \r\n        workplace.approvalStatus === 'onaylandi'\r\n      );\r\n      \r\n      console.log('Approved workplaces count:', approvedWorkplaces.length);\r\n      \r\n      // Update all state\r\n      setWorkplaces(approvedWorkplaces);\r\n      setAllExperts(expertsData);\r\n      setAllDoctors(doctorsData);\r\n      setAllDsps(dspsData);\r\n      console.log('State updated after data fetch');\r\n    } catch (error) {\r\n      console.error('Error fetching data:', error);\r\n      setError('Veri alınırken hata oluştu');\r\n    }\r\n  }, []);\r\n\r\n  // Load all data from backend on component mount\r\n  useEffect(() => {\r\n    console.log('WorkplacePage useEffect running - fetching all data at:', new Date().toISOString());\r\n    fetchAllData();\r\n  }, []);\r\n\r\n  // Refresh data when location changes\r\n  useEffect(() => {\r\n    console.log('Location changed to:', location.pathname, 'at:', new Date().toISOString());\r\n    fetchAllData();\r\n  }, [location.pathname]);\r\n\r\n  // Refresh data when window regains focus\r\n  useEffect(() => {\r\n    const handleFocus = () => {\r\n      console.log('Window focused, refreshing all data...');\r\n      fetchAllData();\r\n    };\r\n\r\n    window.addEventListener('focus', handleFocus);\r\n    return () => {\r\n      window.removeEventListener('focus', handleFocus);\r\n    };\r\n  }, []);\r\n  \r\n  // Clear notifications after timeout\r\n  const clearNotifications = () => {\r\n    setTimeout(() => {\r\n      setSuccess('');\r\n      setError('');\r\n    }, 3000);\r\n  };\r\n\r\n  // Function to format risk level in Turkish\r\n  const formatRiskLevel = (riskLevel: string): string => {\r\n    switch (riskLevel) {\r\n      case 'low':\r\n        return 'Az Tehlikeli';\r\n      case 'dangerous':\r\n        return 'Tehlikeli';\r\n      case 'veryDangerous':\r\n        return 'Çok Tehlikeli';\r\n      default:\r\n        return 'Belirtilmemiş';\r\n    }\r\n  };\r\n  \r\n  // Function to get expert name by ID\r\n  const getExpertName = (expertId: string, workplace?: Workplace) => {\r\n    // First try to get name from included data in workplace\r\n    if (workplace && workplace.Expert) {\r\n      console.log('Using included Expert data:', workplace.Expert);\r\n      // Check if firstName and lastName exist\r\n      if (workplace.Expert.firstName && workplace.Expert.lastName) {\r\n        return `${workplace.Expert.firstName} ${workplace.Expert.lastName}`;\r\n      }\r\n    }\r\n    \r\n    // Fallback to lookup in allExperts array\r\n    if (!expertId) return 'Atanmamış';\r\n    const expert = allExperts.find(expert => expert.id === parseInt(expertId));\r\n    if (expert && expert.firstName && expert.lastName) {\r\n      return `${expert.firstName} ${expert.lastName}`;\r\n    }\r\n    return 'Bilinmeyen Uzman';\r\n  };\r\n  \r\n  // Function to get doctor name by ID\r\n  const getDoctorName = (doctorId: string, workplace?: Workplace) => {\r\n    // First try to get name from included data in workplace\r\n    if (workplace && workplace.Doctor) {\r\n      console.log('Using included Doctor data:', workplace.Doctor);\r\n      // Check if firstName and lastName exist\r\n      if (workplace.Doctor.firstName && workplace.Doctor.lastName) {\r\n        return `${workplace.Doctor.firstName} ${workplace.Doctor.lastName}`;\r\n      }\r\n    }\r\n    \r\n    // Fallback to lookup in allDoctors array\r\n    if (!doctorId) return 'Atanmamış';\r\n    const doctor = allDoctors.find(doctor => doctor.id === parseInt(doctorId));\r\n    if (doctor && doctor.firstName && doctor.lastName) {\r\n      return `${doctor.firstName} ${doctor.lastName}`;\r\n    }\r\n    return 'Bilinmeyen Hekim';\r\n  };\r\n  \r\n  // Function to get DSP name by ID\r\n  const getDspName = (dspId: string, workplace?: Workplace) => {\r\n    // First try to get name from included data in workplace\r\n    if (workplace && workplace.Dsp) {\r\n      console.log('Using included Dsp data:', workplace.Dsp);\r\n      // Check if firstName and lastName exist\r\n      if (workplace.Dsp.firstName && workplace.Dsp.lastName) {\r\n        return `${workplace.Dsp.firstName} ${workplace.Dsp.lastName}`;\r\n      }\r\n    }\r\n    \r\n    // Fallback to lookup in allDsps array\r\n    if (!dspId) return 'Atanmamış';\r\n    const dsp = allDsps.find(dsp => dsp.id === parseInt(dspId));\r\n    if (dsp && dsp.firstName && dsp.lastName) {\r\n      return `${dsp.firstName} ${dsp.lastName}`;\r\n    }\r\n    return 'Bilinmeyen DSP';\r\n  };\r\n  \r\n  const handleRowClick = (workplace: Workplace) => {\r\n    setModalFormData(workplace);\r\n    setIsModalOpen(true);\r\n    // Prevent background scrolling when modal is open\r\n    document.body.style.overflow = 'hidden';\r\n  };\r\n  \r\n  const handleModalChange = (e: React.ChangeEvent<HTMLInputElement | HTMLTextAreaElement | HTMLSelectElement>) => {\r\n    const { name, value } = e.target;\r\n    \r\n    setModalFormData(prev => ({\r\n      ...prev,\r\n      [name]: value\r\n    }));\r\n  };\r\n  \r\n  const handleModalSubmit = async (e: React.FormEvent) => {\r\n    e.preventDefault();\r\n    \r\n    try {\r\n      if (modalFormData.id) {\r\n        // Ensure all required fields are included and handle null values for assigned IDs\r\n        const workplaceData = {\r\n          ...modalFormData,\r\n          // Handle null values for assigned IDs\r\n          assignedExpertId: modalFormData.assignedExpertId || null,\r\n          assignedDoctorId: modalFormData.assignedDoctorId || null,\r\n          assignedDspId: modalFormData.assignedDspId || null\r\n        };\r\n        \r\n        // Update existing workplace\r\n        const updatedWorkplace = await updateWorkplace(modalFormData.id, workplaceData);\r\n        \r\n        // Show success message\r\n        setSuccess('İş yeri başarıyla güncellendi!');\r\n        \r\n        // Close modal first\r\n        setIsModalOpen(false);\r\n        \r\n        // Refresh all data from backend to ensure consistency\r\n        await fetchAllData();\r\n        \r\n        // Clear notifications\r\n        clearNotifications();\r\n      }\r\n    } catch (error: any) {\r\n      console.error('Error updating workplace:', error);\r\n      // Provide more specific error message\r\n      if (error.message) {\r\n        setError(`İş yeri güncellenirken hata oluştu: ${error.message}`);\r\n      } else {\r\n        setError('İş yeri güncellenirken hata oluştu');\r\n      }\r\n      clearNotifications();\r\n    }\r\n  };\r\n\r\n  const handleDeleteWorkplace = () => {\r\n    // Show confirmation dialog before deleting\r\n    setShowDeleteConfirmation(true);\r\n  };\r\n\r\n  // Function to confirm deletion\r\n  const confirmDeleteWorkplace = async () => {\r\n    try {\r\n      if (modalFormData.id) {\r\n        // Delete from backend\r\n        await deleteWorkplace(modalFormData.id);\r\n        \r\n        // Show success message\r\n        setSuccess('İş yeri başarıyla silindi!');\r\n        \r\n        // Close confirmation dialog and modal\r\n        setShowDeleteConfirmation(false);\r\n        closeModal();\r\n        \r\n        // Refresh all data from backend to ensure consistency\r\n        await fetchAllData();\r\n        \r\n        // Clear notifications\r\n        clearNotifications();\r\n      } else {\r\n        setShowDeleteConfirmation(false);\r\n        closeModal();\r\n      }\r\n    } catch (error: any) {\r\n      console.error('Error deleting workplace:', error);\r\n      // Provide more specific error message\r\n      if (error.message) {\r\n        setError(`İş yeri silinirken hata oluştu: ${error.message}`);\r\n      } else {\r\n        setError('İş yeri silinirken hata oluştu');\r\n      }\r\n      clearNotifications();\r\n    }\r\n  };\r\n\r\n  // Function to cancel deletion\r\n  const cancelDeleteWorkplace = () => {\r\n    setShowDeleteConfirmation(false);\r\n  };\r\n\r\n  // Function to close modal\r\n  const closeModal = () => {\r\n    setIsModalOpen(false);\r\n    setModalFormData({});\r\n    // Allow background scrolling when modal is closed\r\n    document.body.style.overflow = 'auto';\r\n  };\r\n\r\n  return (\r\n    <div className=\"workplace-page-container\">\r\n      {/* Popup notifications */}\r\n      {success && (\r\n        <div className=\"popup-notification alert alert-info\">\r\n          {success}\r\n        </div>\r\n      )}\r\n      {error && (\r\n        <div className=\"popup-notification alert alert-warning\">\r\n          {error}\r\n        </div>\r\n      )}\r\n      \r\n      {/* Delete Confirmation Popup */}\r\n      {showDeleteConfirmation && (\r\n        <div className=\"popup-overlay\" onClick={cancelDeleteWorkplace}>\r\n          <div className=\"popup-content\" onClick={(e) => e.stopPropagation()}>\r\n            <div className=\"popup-header\">\r\n              <h3>Kayıt Silme Onayı</h3>\r\n              <button className=\"popup-close\" onClick={cancelDeleteWorkplace}>×</button>\r\n            </div>\r\n            <div className=\"popup-body\">\r\n              <p>Kayıdı gerçekten silmek istiyor musunuz?</p>\r\n            </div>\r\n            <div className=\"popup-footer\">\r\n              <button className=\"btn btn-secondary\" onClick={cancelDeleteWorkplace}>İptal</button>\r\n              <button className=\"btn btn-danger\" onClick={confirmDeleteWorkplace}>Sil</button>\r\n            </div>\r\n          </div>\r\n        </div>\r\n      )}\r\n\r\n      <div className=\"workplace-page-content\">\r\n        <h2 className=\"page-title\">Onaylanmış İş Yerleri</h2>\r\n        \r\n        {/* Workplaces list */}\r\n        <div className=\"workplaces-container\">\r\n          <div className=\"header-row\">\r\n            <div className=\"header-cell\">İş Yeri Adı</div>\r\n            <div className=\"header-cell\">Sicil No</div>\r\n            <div className=\"header-cell\">Tehlike Sınıfı</div>\r\n            <div className=\"header-cell\">Atanan Uzman</div>\r\n            <div className=\"header-cell\">Atanan Hekim</div>\r\n            <div className=\"header-cell\">Atanan DSP</div>\r\n          </div>\r\n          \r\n          <div className=\"workplaces-list\">\r\n            {workplaces.map(workplace => (\r\n              <div \r\n                key={workplace.id} \r\n                className=\"workplace-row\"\r\n                onClick={() => handleRowClick(workplace)}\r\n              >\r\n                <div className=\"workplace-cell\">{workplace.name}</div>\r\n                <div className=\"workplace-cell\">{workplace.sskRegistrationNo}</div>\r\n                <div className=\"workplace-cell\">{formatRiskLevel(workplace.riskLevel)}</div>\r\n                <div className=\"workplace-cell\">{getExpertName(workplace.assignedExpertId, workplace)}</div>\r\n                <div className=\"workplace-cell\">{getDoctorName(workplace.assignedDoctorId, workplace)}</div>\r\n                <div className=\"workplace-cell\">{getDspName(workplace.assignedDspId, workplace)}</div>\r\n              </div>\r\n            ))}\r\n            \r\n            {workplaces.length === 0 && (\r\n              <div className=\"no-workplaces\">\r\n                Onaylanmış iş yeri bulunmamaktadır.\r\n              </div>\r\n            )}\r\n          </div>\r\n        </div>\r\n      </div>\r\n      \r\n      {/* Modal for viewing/editing workplace */}\r\n      {isModalOpen && (\r\n        <div className=\"modal-overlay\" onClick={closeModal}>\r\n          <div className=\"modal-content\" onClick={(e) => e.stopPropagation()}>\r\n            <div className=\"modal-header\">\r\n              <h3>Kayıtlı Uzman Kartı</h3>\r\n              <button className=\"modal-close\" onClick={closeModal}>×</button>\r\n            </div>\r\n            <div className=\"modal-body\">\r\n              <form onSubmit={handleModalSubmit}>\r\n                <div className=\"form-row\">\r\n                  <div className=\"form-col\">\r\n                    <div className=\"form-group\">\r\n                      <label className=\"form-label\">İş Yeri Adı:</label>\r\n                      <input\r\n                        type=\"text\"\r\n                        name=\"name\"\r\n                        value={modalFormData.name || ''}\r\n                        onChange={handleModalChange}\r\n                        className=\"form-input\"\r\n                        readOnly\r\n                      />\r\n                    </div>\r\n                  </div>\r\n                  <div className=\"form-col\">\r\n                    <div className=\"form-group\">\r\n                      <label className=\"form-label\">SGK İşyeri Sicil No:</label>\r\n                      <input\r\n                        type=\"text\"\r\n                        name=\"sskRegistrationNo\"\r\n                        value={modalFormData.sskRegistrationNo || ''}\r\n                        onChange={handleModalChange}\r\n                        className=\"form-input\"\r\n                        readOnly\r\n                      />\r\n                    </div>\r\n                  </div>\r\n                </div>\r\n                \r\n                <div className=\"form-row\">\r\n                  <div className=\"form-col\">\r\n                    <div className=\"form-group\">\r\n                      <label className=\"form-label\">Tehlike Sınıfı:</label>\r\n                      <input\r\n                        type=\"text\"\r\n                        name=\"riskLevel\"\r\n                        value={modalFormData.riskLevel ? formatRiskLevel(modalFormData.riskLevel) : ''}\r\n                        onChange={handleModalChange}\r\n                        className=\"form-input\"\r\n                        readOnly\r\n                      />\r\n                    </div>\r\n                  </div>\r\n                </div>\r\n                \r\n                <div className=\"form-row\">\r\n                  <div className=\"form-col\">\r\n                    <div className=\"form-group\">\r\n                      <label className=\"form-label\">Atanan Uzman:</label>\r\n                      <select\r\n                        name=\"assignedExpertId\"\r\n                        value={modalFormData.assignedExpertId || ''}\r\n                        onChange={handleModalChange}\r\n                        className=\"form-select\"\r\n                      >\r\n                        <option value=\"\">Seçiniz</option>\r\n                        {allExperts.map(expert => (\r\n                          <option key={expert.id} value={expert.id}>\r\n                            {expert.firstName} {expert.lastName}\r\n                          </option>\r\n                        ))}\r\n                      </select>\r\n                    </div>\r\n                  </div>\r\n                  <div className=\"form-col\">\r\n                    <div className=\"form-group\">\r\n                      <label className=\"form-label\">Atanan Hekim:</label>\r\n                      <select\r\n                        name=\"assignedDoctorId\"\r\n                        value={modalFormData.assignedDoctorId || ''}\r\n                        onChange={handleModalChange}\r\n                        className=\"form-select\"\r\n                      >\r\n                        <option value=\"\">Seçiniz</option>\r\n                        {allDoctors.map(doctor => (\r\n                          <option key={doctor.id} value={doctor.id}>\r\n                            {doctor.firstName} {doctor.lastName}\r\n                          </option>\r\n                        ))}\r\n                      </select>\r\n                    </div>\r\n                  </div>\r\n                </div>\r\n                \r\n                <div className=\"form-row\">\r\n                  <div className=\"form-col\">\r\n                    <div className=\"form-group\">\r\n                      <label className=\"form-label\">Atanan DSP:</label>\r\n                      <select\r\n                        name=\"assignedDspId\"\r\n                        value={modalFormData.assignedDspId || ''}\r\n                        onChange={handleModalChange}\r\n                        className=\"form-select\"\r\n                      >\r\n                        <option value=\"\">Seçiniz</option>\r\n                        {allDsps.map(dsp => (\r\n                          <option key={dsp.id} value={dsp.id}>\r\n                            {dsp.firstName} {dsp.lastName}\r\n                          </option>\r\n                        ))}\r\n                      </select>\r\n                    </div>\r\n                  </div>\r\n                </div>\r\n                \r\n                <div className=\"modal-actions\">\r\n                  <button type=\"button\" className=\"btn btn-danger\" onClick={handleDeleteWorkplace}>\r\n                    Sil\r\n                  </button>\r\n                  <button type=\"button\" className=\"btn btn-secondary\" onClick={closeModal}>\r\n                    İptal\r\n                  </button>\r\n                  <button type=\"submit\" className=\"btn btn-primary\">\r\n                    Güncelle\r\n                  </button>\r\n                </div>\r\n              </form>\r\n            </div>\r\n          </div>\r\n        </div>\r\n      )}\r\n    </div>\r\n  );\r\n};\r\n\r\nexport default WorkplacePage;"],"mappings":"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","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}