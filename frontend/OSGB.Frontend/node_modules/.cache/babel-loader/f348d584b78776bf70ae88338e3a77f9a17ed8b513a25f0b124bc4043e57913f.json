{"ast":null,"code":"import React,{useState,useEffect}from'react';import{getAllWorkplaces}from'../services/api';import'./WorkplaceRegistration.css';import{useNavigate}from'react-router-dom';import{jsx as _jsx,jsxs as _jsxs}from\"react/jsx-runtime\";const WorkplaceRegistration=()=>{const[workplaces,setWorkplaces]=useState([]);const navigate=useNavigate();useEffect(()=>{fetchApprovedWorkplaces();},[]);const fetchApprovedWorkplaces=async()=>{try{const allWorkplaces=await getAllWorkplaces();// Filter only approved (\"onaylandi\") workplaces\nconst approvedWorkplaces=allWorkplaces.filter(workplace=>workplace.approvalStatus==='onaylandi');setWorkplaces(approvedWorkplaces);}catch(err){console.error('Error fetching approved workplaces:',err);}};const getRiskLevelText=riskLevel=>{switch(riskLevel){case'low':return'Düşük Risk';case'dangerous':return'Tehlikeli';case'veryDangerous':return'Çok Tehlikeli';default:return riskLevel;}};const handleClose=()=>{// Redirect to dashboard\nnavigate('/');};// Format date for display\nconst formatDate=dateString=>{if(!dateString)return'';const date=new Date(dateString);return date.toLocaleDateString('tr-TR');};return/*#__PURE__*/_jsx(\"div\",{className:\"workplace-registration-container\",children:/*#__PURE__*/_jsxs(\"div\",{className:\"window\",children:[/*#__PURE__*/_jsxs(\"div\",{className:\"window-header\",children:[/*#__PURE__*/_jsx(\"span\",{children:\"Onaylanm\\u0131\\u015F \\u0130\\u015F Yerleri\"}),/*#__PURE__*/_jsx(\"div\",{className:\"window-controls\",children:/*#__PURE__*/_jsx(\"button\",{className:\"window-button\",onClick:handleClose,children:\"\\xD7\"})})]}),/*#__PURE__*/_jsx(\"div\",{className:\"window-content\",children:/*#__PURE__*/_jsx(\"div\",{className:\"approved-workplaces-container\",children:workplaces.length===0?/*#__PURE__*/_jsx(\"div\",{className:\"no-data-message\",children:\"Onaylanm\\u0131\\u015F i\\u015F yeri bulunmamaktad\\u0131r.\"}):workplaces.map((workplace,index)=>/*#__PURE__*/_jsxs(\"div\",{className:\"workplace-row approved-workplace\",children:[/*#__PURE__*/_jsxs(\"div\",{className:\"row-header\",children:[/*#__PURE__*/_jsxs(\"span\",{className:\"row-number\",children:[index+1,\".\"]}),/*#__PURE__*/_jsx(\"span\",{className:\"workplace-name\",children:workplace.name})]}),/*#__PURE__*/_jsxs(\"div\",{className:\"row-details\",children:[/*#__PURE__*/_jsxs(\"div\",{className:\"detail-item\",children:[/*#__PURE__*/_jsx(\"span\",{className:\"detail-label\",children:\"SGK Kay\\u0131t No:\"}),/*#__PURE__*/_jsx(\"span\",{className:\"detail-value\",children:workplace.sskRegistrationNo})]}),/*#__PURE__*/_jsxs(\"div\",{className:\"detail-item\",children:[/*#__PURE__*/_jsx(\"span\",{className:\"detail-label\",children:\"Fiyat:\"}),/*#__PURE__*/_jsxs(\"span\",{className:\"detail-value\",children:[workplace.price,\" \\u20BA\"]})]}),/*#__PURE__*/_jsxs(\"div\",{className:\"detail-item\",children:[/*#__PURE__*/_jsx(\"span\",{className:\"detail-label\",children:\"Tehlike S\\u0131n\\u0131f\\u0131:\"}),/*#__PURE__*/_jsx(\"span\",{className:\"detail-value\",children:getRiskLevelText(workplace.riskLevel)})]}),/*#__PURE__*/_jsxs(\"div\",{className:\"detail-item\",children:[/*#__PURE__*/_jsx(\"span\",{className:\"detail-label\",children:\"Kay\\u0131t Tarihi:\"}),/*#__PURE__*/_jsx(\"span\",{className:\"detail-value\",children:formatDate(workplace.registrationDate)})]}),/*#__PURE__*/_jsxs(\"div\",{className:\"detail-item\",children:[/*#__PURE__*/_jsx(\"span\",{className:\"detail-label\",children:\"Atanan Uzman:\"}),/*#__PURE__*/_jsx(\"span\",{className:\"detail-value\",children:workplace.assignedExpertId||'Atanmamış'})]}),/*#__PURE__*/_jsxs(\"div\",{className:\"detail-item\",children:[/*#__PURE__*/_jsx(\"span\",{className:\"detail-label\",children:\"Atanan Hekim:\"}),/*#__PURE__*/_jsx(\"span\",{className:\"detail-value\",children:workplace.assignedDoctorId||'Atanmamış'})]}),/*#__PURE__*/_jsxs(\"div\",{className:\"detail-item\",children:[/*#__PURE__*/_jsx(\"span\",{className:\"detail-label\",children:\"Atanan DSP:\"}),/*#__PURE__*/_jsx(\"span\",{className:\"detail-value\",children:workplace.assignedDspId||'Atanmamış'})]}),/*#__PURE__*/_jsxs(\"div\",{className:\"detail-item\",children:[/*#__PURE__*/_jsx(\"span\",{className:\"detail-label\",children:\"Kaynak:\"}),/*#__PURE__*/_jsx(\"span\",{className:\"detail-value\",children:workplace.source||'Belirtilmemiş'})]})]})]},workplace.id))})})]})});};export default WorkplaceRegistration;","map":{"version":3,"names":["React","useState","useEffect","getAllWorkplaces","useNavigate","jsx","_jsx","jsxs","_jsxs","WorkplaceRegistration","workplaces","setWorkplaces","navigate","fetchApprovedWorkplaces","allWorkplaces","approvedWorkplaces","filter","workplace","approvalStatus","err","console","error","getRiskLevelText","riskLevel","handleClose","formatDate","dateString","date","Date","toLocaleDateString","className","children","onClick","length","map","index","name","sskRegistrationNo","price","registrationDate","assignedExpertId","assignedDoctorId","assignedDspId","source","id"],"sources":["C:/Users/USER/OneDrive/Desktop/YAZILIM/PRO/OSGB_System/frontend/OSGB.Frontend/src/components/WorkplaceRegistration.tsx"],"sourcesContent":["import React, { useState, useEffect } from 'react';\r\nimport { getAllWorkplaces } from '../services/api';\r\nimport './WorkplaceRegistration.css';\r\nimport { useNavigate } from 'react-router-dom';\r\n\r\nconst WorkplaceRegistration = () => {\r\n  const [workplaces, setWorkplaces] = useState<any[]>([]);\r\n  const navigate = useNavigate();\r\n\r\n  useEffect(() => {\r\n    fetchApprovedWorkplaces();\r\n  }, []);\r\n\r\n  const fetchApprovedWorkplaces = async () => {\r\n    try {\r\n      const allWorkplaces = await getAllWorkplaces();\r\n      // Filter only approved (\"onaylandi\") workplaces\r\n      const approvedWorkplaces = allWorkplaces.filter(\r\n        (workplace: any) => workplace.approvalStatus === 'onaylandi'\r\n      );\r\n      \r\n      setWorkplaces(approvedWorkplaces);\r\n    } catch (err) {\r\n      console.error('Error fetching approved workplaces:', err);\r\n    }\r\n  };\r\n\r\n  const getRiskLevelText = (riskLevel: string) => {\r\n    switch (riskLevel) {\r\n      case 'low': return 'Düşük Risk';\r\n      case 'dangerous': return 'Tehlikeli';\r\n      case 'veryDangerous': return 'Çok Tehlikeli';\r\n      default: return riskLevel;\r\n    }\r\n  };\r\n\r\n  const handleClose = () => {\r\n    // Redirect to dashboard\r\n    navigate('/');\r\n  };\r\n\r\n  // Format date for display\r\n  const formatDate = (dateString: string) => {\r\n    if (!dateString) return '';\r\n    const date = new Date(dateString);\r\n    return date.toLocaleDateString('tr-TR');\r\n  };\r\n\r\n  return (\r\n    <div className=\"workplace-registration-container\">\r\n      <div className=\"window\">\r\n        <div className=\"window-header\">\r\n          <span>Onaylanmış İş Yerleri</span>\r\n          <div className=\"window-controls\">\r\n            <button className=\"window-button\" onClick={handleClose}>×</button>\r\n          </div>\r\n        </div>\r\n        <div className=\"window-content\">\r\n          {/* Approved Workplaces List in Row Format */}\r\n          <div className=\"approved-workplaces-container\">\r\n            {workplaces.length === 0 ? (\r\n              <div className=\"no-data-message\">Onaylanmış iş yeri bulunmamaktadır.</div>\r\n            ) : (\r\n              workplaces.map((workplace, index) => (\r\n                <div key={workplace.id} className=\"workplace-row approved-workplace\">\r\n                  <div className=\"row-header\">\r\n                    <span className=\"row-number\">{index + 1}.</span>\r\n                    <span className=\"workplace-name\">{workplace.name}</span>\r\n                  </div>\r\n                  <div className=\"row-details\">\r\n                    <div className=\"detail-item\">\r\n                      <span className=\"detail-label\">SGK Kayıt No:</span>\r\n                      <span className=\"detail-value\">{workplace.sskRegistrationNo}</span>\r\n                    </div>\r\n                    <div className=\"detail-item\">\r\n                      <span className=\"detail-label\">Fiyat:</span>\r\n                      <span className=\"detail-value\">{workplace.price} ₺</span>\r\n                    </div>\r\n                    <div className=\"detail-item\">\r\n                      <span className=\"detail-label\">Tehlike Sınıfı:</span>\r\n                      <span className=\"detail-value\">{getRiskLevelText(workplace.riskLevel)}</span>\r\n                    </div>\r\n                    <div className=\"detail-item\">\r\n                      <span className=\"detail-label\">Kayıt Tarihi:</span>\r\n                      <span className=\"detail-value\">{formatDate(workplace.registrationDate)}</span>\r\n                    </div>\r\n                    <div className=\"detail-item\">\r\n                      <span className=\"detail-label\">Atanan Uzman:</span>\r\n                      <span className=\"detail-value\">{workplace.assignedExpertId || 'Atanmamış'}</span>\r\n                    </div>\r\n                    <div className=\"detail-item\">\r\n                      <span className=\"detail-label\">Atanan Hekim:</span>\r\n                      <span className=\"detail-value\">{workplace.assignedDoctorId || 'Atanmamış'}</span>\r\n                    </div>\r\n                    <div className=\"detail-item\">\r\n                      <span className=\"detail-label\">Atanan DSP:</span>\r\n                      <span className=\"detail-value\">{workplace.assignedDspId || 'Atanmamış'}</span>\r\n                    </div>\r\n                    <div className=\"detail-item\">\r\n                      <span className=\"detail-label\">Kaynak:</span>\r\n                      <span className=\"detail-value\">{workplace.source || 'Belirtilmemiş'}</span>\r\n                    </div>\r\n                  </div>\r\n                </div>\r\n              ))\r\n            )}\r\n          </div>\r\n        </div>\r\n      </div>\r\n    </div>\r\n  );\r\n};\r\n\r\nexport default WorkplaceRegistration;"],"mappings":"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","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}