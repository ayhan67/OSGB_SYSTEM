{"ast":null,"code":"// Updated API service with authentication support\nconst API_BASE_URL = process.env.REACT_APP_API_URL || 'http://localhost:5005/api';\nconsole.log('API_BASE_URL:', API_BASE_URL);\n\n// Store token in memory (in a real app, you might want to use localStorage)\nlet authToken = null;\nlet organizationId = null;\n\n// Initialize auth token and organization ID from localStorage\nif (typeof window !== 'undefined') {\n  authToken = localStorage.getItem('authToken');\n  const storedOrgId = localStorage.getItem('organizationId');\n  if (storedOrgId) {\n    organizationId = parseInt(storedOrgId, 10);\n  }\n}\n\n// Rate limiting\nconst RATE_LIMIT_WINDOW = 60000; // 1 minute\nconst MAX_REQUESTS = 100;\nconst requestTimestamps = [];\nconst checkRateLimit = () => {\n  const now = Date.now();\n  // Remove timestamps older than the window\n  while (requestTimestamps.length > 0 && requestTimestamps[0] < now - RATE_LIMIT_WINDOW) {\n    requestTimestamps.shift();\n  }\n\n  // Check if we've exceeded the limit\n  if (requestTimestamps.length >= MAX_REQUESTS) {\n    throw new Error('Rate limit exceeded. Please try again later.');\n  }\n\n  // Add current timestamp\n  requestTimestamps.push(now);\n};\n\n// Input sanitization to prevent XSS\nconst sanitizeInput = input => {\n  // For login credentials, we don't want to convert to HTML entities\n  // Just strip any HTML tags if they exist\n  return input.replace(/<[^>]*>/g, '');\n};\nconst sanitizeObject = obj => {\n  if (typeof obj === 'string') {\n    return sanitizeInput(obj);\n  }\n  if (Array.isArray(obj)) {\n    return obj.map(sanitizeObject);\n  }\n  if (obj && typeof obj === 'object') {\n    const sanitized = {};\n    for (const key in obj) {\n      if (obj.hasOwnProperty(key)) {\n        sanitized[key] = sanitizeObject(obj[key]);\n      }\n    }\n    return sanitized;\n  }\n  return obj;\n};\n\n// Simple in-memory cache\nconst apiCache = new Map();\nconst CACHE_TTL = 5 * 60 * 1000; // 5 minutes\n\nconst getCachedData = key => {\n  const cached = apiCache.get(key);\n  if (cached && Date.now() - cached.timestamp < CACHE_TTL) {\n    return cached.data;\n  }\n  apiCache.delete(key);\n  return null;\n};\nconst setCachedData = (key, data) => {\n  apiCache.set(key, {\n    data,\n    timestamp: Date.now()\n  });\n};\nconst clearCache = pattern => {\n  const keys = Array.from(apiCache.keys());\n  const matchingKeys = keys.filter(key => key.includes(pattern));\n  matchingKeys.forEach(key => apiCache.delete(key));\n};\n\n// Create headers with authentication\nconst getHeaders = (contentType = 'application/json') => {\n  // Check rate limit before each request\n  checkRateLimit();\n  const headers = {\n    'Content-Type': contentType\n  };\n  if (authToken) {\n    headers['Authorization'] = `Bearer ${authToken}`;\n  }\n  if (organizationId) {\n    headers['x-organization-id'] = organizationId.toString();\n  }\n  return headers;\n};\n\n// OSGB self-registration\nexport const registerOrganization = async orgData => {\n  var _data$user;\n  // Sanitize inputs\n  const sanitizedData = sanitizeObject(orgData);\n  const response = await fetch(`${API_BASE_URL}/auth/register-organization`, {\n    method: 'POST',\n    headers: getHeaders(),\n    body: JSON.stringify(sanitizedData)\n  });\n  if (!response.ok) {\n    const errorData = await response.json().catch(() => ({}));\n    throw new Error(errorData.message || 'Organization registration failed');\n  }\n  const data = await response.json();\n\n  // Set auth token if provided\n  if (data.token) {\n    setAuthToken(data.token);\n  }\n\n  // Set organization ID if provided\n  if ((_data$user = data.user) !== null && _data$user !== void 0 && _data$user.organizationId) {\n    setOrganizationId(data.user.organizationId);\n  }\n  return data;\n};\n\n// System configuration\nexport const getAllSystemConfig = async () => {\n  const cacheKey = 'system_config';\n  const cached = getCachedData(cacheKey);\n  if (cached) {\n    return cached;\n  }\n  const response = await fetch(`${API_BASE_URL}/system-config`, {\n    method: 'GET',\n    headers: getHeaders()\n  });\n  if (!response.ok) {\n    const errorData = await response.json().catch(() => ({}));\n    throw new Error(errorData.message || 'Failed to fetch system configuration');\n  }\n  const data = await response.json();\n  setCachedData(cacheKey, data);\n  return data;\n};\nexport const getSystemConfigByKey = async key => {\n  const cacheKey = `system_config_${key}`;\n  const cached = getCachedData(cacheKey);\n  if (cached) {\n    return cached;\n  }\n  const response = await fetch(`${API_BASE_URL}/system-config/${key}`, {\n    method: 'GET',\n    headers: getHeaders()\n  });\n  if (!response.ok) {\n    const errorData = await response.json().catch(() => ({}));\n    throw new Error(errorData.message || 'Failed to fetch system configuration');\n  }\n  const data = await response.json();\n  setCachedData(cacheKey, data);\n  return data;\n};\nexport const upsertSystemConfig = async config => {\n  // Sanitize inputs\n  const sanitizedConfig = sanitizeObject(config);\n  const response = await fetch(`${API_BASE_URL}/system-config`, {\n    method: 'POST',\n    headers: getHeaders(),\n    body: JSON.stringify(sanitizedConfig)\n  });\n  if (!response.ok) {\n    const errorData = await response.json().catch(() => ({}));\n    throw new Error(errorData.message || 'Failed to update system configuration');\n  }\n  const data = await response.json();\n\n  // Clear cache for system config\n  clearCache('system_config');\n  clearCache(`system_config_${config.key}`);\n  return data;\n};\nexport const deleteSystemConfig = async key => {\n  const response = await fetch(`${API_BASE_URL}/system-config/${key}`, {\n    method: 'DELETE',\n    headers: getHeaders()\n  });\n  if (!response.ok) {\n    const errorData = await response.json().catch(() => ({}));\n    throw new Error(errorData.message || 'Failed to delete system configuration');\n  }\n\n  // Clear cache for system config\n  clearCache('system_config');\n  clearCache(`system_config_${key}`);\n  return true;\n};\n\n// User authentication\nexport const login = async (username, password) => {\n  var _data$user2;\n  // Sanitize inputs\n  const sanitizedUsername = sanitizeInput(username);\n  const sanitizedPassword = sanitizeInput(password);\n\n  // Debug logging\n  console.log('Attempting login with:', {\n    username: sanitizedUsername,\n    password: sanitizedPassword\n  });\n\n  // Create the request body\n  const requestBody = {\n    username: sanitizedUsername,\n    password: sanitizedPassword\n  };\n  console.log('Request body:', requestBody);\n  console.log('Stringified request body:', JSON.stringify(requestBody));\n  const loginUrl = `${API_BASE_URL}/auth/login`;\n  console.log('Login URL:', loginUrl);\n  const response = await fetch(loginUrl, {\n    method: 'POST',\n    headers: getHeaders(),\n    body: JSON.stringify(requestBody)\n  });\n  console.log('Login response status:', response.status);\n  // Convert headers to array for logging\n  const headersArray = [];\n  response.headers.forEach((value, key) => {\n    headersArray.push([key, value]);\n  });\n  console.log('Login response headers:', headersArray);\n  if (!response.ok) {\n    const errorData = await response.json().catch(() => ({}));\n    console.log('Login error data:', errorData);\n    throw new Error(errorData.message || 'Login failed');\n  }\n  const data = await response.json();\n  console.log('Login success data:', data);\n\n  // Set auth token if provided\n  if (data.token) {\n    setAuthToken(data.token);\n  }\n\n  // Set organization ID if provided\n  if ((_data$user2 = data.user) !== null && _data$user2 !== void 0 && _data$user2.organizationId) {\n    setOrganizationId(data.user.organizationId);\n  }\n  return data;\n};\nexport const register = async userData => {\n  var _data$user3;\n  // Sanitize inputs\n  const sanitizedData = sanitizeObject(userData);\n  const response = await fetch(`${API_BASE_URL}/auth/register`, {\n    method: 'POST',\n    headers: getHeaders(),\n    body: JSON.stringify(sanitizedData)\n  });\n  if (!response.ok) {\n    const errorData = await response.json().catch(() => ({}));\n    throw new Error(errorData.message || 'Registration failed');\n  }\n  const data = await response.json();\n\n  // Set auth token if provided\n  if (data.token) {\n    setAuthToken(data.token);\n  }\n\n  // Set organization ID if provided\n  if ((_data$user3 = data.user) !== null && _data$user3 !== void 0 && _data$user3.organizationId) {\n    setOrganizationId(data.user.organizationId);\n  }\n  return data;\n};\n\n// Get current user profile\nexport const getCurrentUser = async () => {\n  const cacheKey = 'current_user';\n  const cached = getCachedData(cacheKey);\n  if (cached) {\n    return cached;\n  }\n  const response = await fetch(`${API_BASE_URL}/auth/me`, {\n    method: 'GET',\n    headers: getHeaders()\n  });\n  if (!response.ok) {\n    const errorData = await response.json().catch(() => ({}));\n    throw new Error(errorData.message || 'Failed to fetch user profile');\n  }\n  const data = await response.json();\n  setCachedData(cacheKey, data);\n  return data;\n};\n\n// Update user profile\nexport const updateUserProfile = async userData => {\n  // Sanitize inputs\n  const sanitizedData = sanitizeObject(userData);\n  const response = await fetch(`${API_BASE_URL}/auth/me`, {\n    method: 'PUT',\n    headers: getHeaders(),\n    body: JSON.stringify(sanitizedData)\n  });\n  if (!response.ok) {\n    const errorData = await response.json().catch(() => ({}));\n    throw new Error(errorData.message || 'Failed to update user profile');\n  }\n  const data = await response.json();\n  clearCache('current_user');\n  return data;\n};\n\n// Set authentication token\nexport const setAuthToken = token => {\n  authToken = token;\n  localStorage.setItem('authToken', token);\n};\n\n// Set organization ID\nexport const setOrganizationId = orgId => {\n  organizationId = orgId;\n  localStorage.setItem('organizationId', orgId.toString());\n};\n\n// Clear authentication\nexport const clearAuth = () => {\n  authToken = null;\n  organizationId = null;\n  localStorage.removeItem('authToken');\n  localStorage.removeItem('organizationId');\n};\n\n// Workplaces\nexport const getAllWorkplaces = async () => {\n  const cacheKey = 'workplaces';\n  const cached = getCachedData(cacheKey);\n  if (cached) {\n    return cached;\n  }\n  const response = await fetch(`${API_BASE_URL}/workplaces`, {\n    method: 'GET',\n    headers: getHeaders()\n  });\n  if (!response.ok) {\n    const errorData = await response.json().catch(() => ({}));\n    const errorMessage = errorData.message || `Failed to fetch workplaces: ${response.status} ${response.statusText}`;\n    throw new Error(errorMessage);\n  }\n  const data = await response.json();\n  setCachedData(cacheKey, data);\n  return data;\n};\nexport const getWorkplaceById = async id => {\n  const cacheKey = `workplace_${id}`;\n  const cached = getCachedData(cacheKey);\n  if (cached) {\n    return cached;\n  }\n  const response = await fetch(`${API_BASE_URL}/workplaces/${id}`, {\n    method: 'GET',\n    headers: getHeaders()\n  });\n  if (!response.ok) {\n    const errorData = await response.json().catch(() => ({}));\n    throw new Error(errorData.message || 'Failed to fetch workplace');\n  }\n  const data = await response.json();\n  setCachedData(cacheKey, data);\n  return data;\n};\nexport const createWorkplace = async workplace => {\n  // Don't sanitize workplace data as it can break JSON structure\n  const response = await fetch(`${API_BASE_URL}/workplaces`, {\n    method: 'POST',\n    headers: getHeaders(),\n    body: JSON.stringify(workplace)\n  });\n  if (!response.ok) {\n    const errorData = await response.json().catch(() => ({}));\n    throw new Error(errorData.message || 'Failed to create workplace');\n  }\n  const data = await response.json();\n\n  // Clear cache for workplaces\n  clearCache('workplaces');\n  return data;\n};\nexport const updateWorkplace = async (id, workplace) => {\n  // Don't sanitize workplace data as it can break JSON structure\n  const response = await fetch(`${API_BASE_URL}/workplaces/${id}`, {\n    method: 'PUT',\n    headers: getHeaders(),\n    body: JSON.stringify(workplace)\n  });\n  if (!response.ok) {\n    const errorData = await response.json().catch(() => ({}));\n    throw new Error(errorData.message || 'Failed to update workplace');\n  }\n  const data = await response.json();\n\n  // Clear cache for this workplace and all workplaces\n  clearCache(`workplace_${id}`);\n  clearCache('workplaces');\n  return data;\n};\nexport const deleteWorkplace = async id => {\n  const response = await fetch(`${API_BASE_URL}/workplaces/${id}`, {\n    method: 'DELETE',\n    headers: getHeaders()\n  });\n  if (!response.ok) {\n    const errorData = await response.json().catch(() => ({}));\n    throw new Error(errorData.message || 'Failed to delete workplace');\n  }\n\n  // Clear cache for this workplace and all workplaces\n  clearCache(`workplace_${id}`);\n  clearCache('workplaces');\n  return true;\n};\n\n// Get available experts for a workplace based on risk level and employee count\nexport const getAvailableExperts = async workplaceId => {\n  const cacheKey = `available_experts_${workplaceId}`;\n  const cached = getCachedData(cacheKey);\n  if (cached) {\n    return cached;\n  }\n  const response = await fetch(`${API_BASE_URL}/workplaces/${workplaceId}/available-experts`, {\n    method: 'GET',\n    headers: getHeaders()\n  });\n  if (!response.ok) {\n    const errorData = await response.json().catch(() => ({}));\n    const errorMessage = errorData.message || `Failed to fetch available experts: ${response.status} ${response.statusText}`;\n    throw new Error(errorMessage);\n  }\n  const data = await response.json();\n  setCachedData(cacheKey, data);\n  return data;\n};\n\n// Get available doctors for a workplace based on risk level and employee count\nexport const getAvailableDoctors = async workplaceId => {\n  const cacheKey = `available_doctors_${workplaceId}`;\n  const cached = getCachedData(cacheKey);\n  if (cached) {\n    return cached;\n  }\n  const response = await fetch(`${API_BASE_URL}/workplaces/${workplaceId}/available-doctors`, {\n    method: 'GET',\n    headers: getHeaders()\n  });\n  if (!response.ok) {\n    const errorData = await response.json().catch(() => ({}));\n    const errorMessage = errorData.message || `Failed to fetch available doctors: ${response.status} ${response.statusText}`;\n    throw new Error(errorMessage);\n  }\n  const data = await response.json();\n  setCachedData(cacheKey, data);\n  return data;\n};\n\n// Get available DSPs for a workplace based on risk level and employee count\nexport const getAvailableDsps = async workplaceId => {\n  const cacheKey = `available_dsps_${workplaceId}`;\n  const cached = getCachedData(cacheKey);\n  if (cached) {\n    return cached;\n  }\n  const response = await fetch(`${API_BASE_URL}/workplaces/${workplaceId}/available-dsps`, {\n    method: 'GET',\n    headers: getHeaders()\n  });\n  if (!response.ok) {\n    const errorData = await response.json().catch(() => ({}));\n    const errorMessage = errorData.message || `Failed to fetch available DSPs: ${response.status} ${response.statusText}`;\n    throw new Error(errorMessage);\n  }\n  const data = await response.json();\n  setCachedData(cacheKey, data);\n  return data;\n};\n\n// Experts\nexport const getAllExperts = async () => {\n  const cacheKey = 'experts';\n  const cached = getCachedData(cacheKey);\n  if (cached) {\n    return cached;\n  }\n  const response = await fetch(`${API_BASE_URL}/experts`, {\n    method: 'GET',\n    headers: getHeaders()\n  });\n  if (!response.ok) {\n    const errorData = await response.json().catch(() => ({}));\n    const errorMessage = errorData.message || `Failed to fetch experts: ${response.status} ${response.statusText}`;\n    throw new Error(errorMessage);\n  }\n  const data = await response.json();\n  setCachedData(cacheKey, data);\n  return data;\n};\nexport const getExpertById = async id => {\n  const cacheKey = `expert_${id}`;\n  const cached = getCachedData(cacheKey);\n  if (cached) {\n    return cached;\n  }\n  const response = await fetch(`${API_BASE_URL}/experts/${id}`, {\n    method: 'GET',\n    headers: getHeaders()\n  });\n  if (!response.ok) {\n    const errorData = await response.json().catch(() => ({}));\n    throw new Error(errorData.message || 'Failed to fetch expert');\n  }\n  const data = await response.json();\n  setCachedData(cacheKey, data);\n  return data;\n};\nexport const createExpert = async expert => {\n  // Don't sanitize expert data as it can break JSON structure\n  const response = await fetch(`${API_BASE_URL}/experts`, {\n    method: 'POST',\n    headers: getHeaders(),\n    body: JSON.stringify(expert)\n  });\n  if (!response.ok) {\n    const errorData = await response.json().catch(() => ({}));\n    throw new Error(errorData.message || 'Failed to create expert');\n  }\n  const data = await response.json();\n\n  // Clear cache for experts\n  clearCache('experts');\n  return data;\n};\nexport const updateExpert = async (id, expert) => {\n  // Don't sanitize expert data as it can break JSON structure\n  const response = await fetch(`${API_BASE_URL}/experts/${id}`, {\n    method: 'PUT',\n    headers: getHeaders(),\n    body: JSON.stringify(expert)\n  });\n  if (!response.ok) {\n    const errorData = await response.json().catch(() => ({}));\n    throw new Error(errorData.message || 'Failed to update expert');\n  }\n  const data = await response.json();\n\n  // Clear cache for this expert and all experts\n  clearCache(`expert_${id}`);\n  clearCache('experts');\n  return data;\n};\nexport const deleteExpert = async id => {\n  const response = await fetch(`${API_BASE_URL}/experts/${id}`, {\n    method: 'DELETE',\n    headers: getHeaders()\n  });\n  if (!response.ok) {\n    const errorData = await response.json().catch(() => ({}));\n    throw new Error(errorData.message || 'Failed to delete expert');\n  }\n\n  // Clear cache for this expert and all experts\n  clearCache(`expert_${id}`);\n  clearCache('experts');\n  return true;\n};\n\n// Get assigned workplaces for an expert\nexport const getExpertAssignedWorkplaces = async expertId => {\n  const cacheKey = `expert_assigned_workplaces_${expertId}`;\n  const cached = getCachedData(cacheKey);\n  if (cached) {\n    return cached;\n  }\n  const response = await fetch(`${API_BASE_URL}/experts/${expertId}/assigned-workplaces`, {\n    method: 'GET',\n    headers: getHeaders()\n  });\n  if (!response.ok) {\n    const errorData = await response.json().catch(() => ({}));\n    throw new Error(errorData.message || 'Failed to fetch assigned workplaces for expert');\n  }\n  const data = await response.json();\n  setCachedData(cacheKey, data);\n  return data;\n};\n\n// Get assigned workplaces for a doctor\nexport const getDoctorAssignedWorkplaces = async doctorId => {\n  const cacheKey = `doctor_assigned_workplaces_${doctorId}`;\n  const cached = getCachedData(cacheKey);\n  if (cached) {\n    return cached;\n  }\n  const response = await fetch(`${API_BASE_URL}/doctors/${doctorId}/assigned-workplaces`, {\n    method: 'GET',\n    headers: getHeaders()\n  });\n  if (!response.ok) {\n    const errorData = await response.json().catch(() => ({}));\n    throw new Error(errorData.message || 'Failed to fetch assigned workplaces for doctor');\n  }\n  const data = await response.json();\n  setCachedData(cacheKey, data);\n  return data;\n};\n\n// Get assigned workplaces for a DSP\nexport const getDspAssignedWorkplaces = async dspId => {\n  const cacheKey = `dsp_assigned_workplaces_${dspId}`;\n  const cached = getCachedData(cacheKey);\n  if (cached) {\n    return cached;\n  }\n  const response = await fetch(`${API_BASE_URL}/dsps/${dspId}/assigned-workplaces`, {\n    method: 'GET',\n    headers: getHeaders()\n  });\n  if (!response.ok) {\n    const errorData = await response.json().catch(() => ({}));\n    throw new Error(errorData.message || 'Failed to fetch assigned workplaces for DSP');\n  }\n  const data = await response.json();\n  setCachedData(cacheKey, data);\n  return data;\n};\n\n// Doctors\nexport const getAllDoctors = async () => {\n  const cacheKey = 'doctors';\n  const cached = getCachedData(cacheKey);\n  if (cached) {\n    return cached;\n  }\n  const response = await fetch(`${API_BASE_URL}/doctors`, {\n    method: 'GET',\n    headers: getHeaders()\n  });\n  if (!response.ok) {\n    const errorData = await response.json().catch(() => ({}));\n    throw new Error(errorData.message || 'Failed to fetch doctors');\n  }\n  const data = await response.json();\n  console.log('getAllDoctors response:', data);\n  setCachedData(cacheKey, data);\n  return data;\n};\nexport const getDoctorById = async id => {\n  const cacheKey = `doctor_${id}`;\n  const cached = getCachedData(cacheKey);\n  if (cached) {\n    return cached;\n  }\n  const response = await fetch(`${API_BASE_URL}/doctors/${id}`, {\n    method: 'GET',\n    headers: getHeaders()\n  });\n  if (!response.ok) {\n    const errorData = await response.json().catch(() => ({}));\n    throw new Error(errorData.message || 'Failed to fetch doctor');\n  }\n  const data = await response.json();\n  setCachedData(cacheKey, data);\n  return data;\n};\nexport const createDoctor = async doctor => {\n  // Don't sanitize doctor data as it can break JSON structure\n  const response = await fetch(`${API_BASE_URL}/doctors`, {\n    method: 'POST',\n    headers: getHeaders(),\n    body: JSON.stringify(doctor)\n  });\n  if (!response.ok) {\n    const errorData = await response.json().catch(() => ({}));\n    throw new Error(errorData.message || 'Failed to create doctor');\n  }\n  const data = await response.json();\n\n  // Clear cache for doctors\n  clearCache('doctors');\n  return data;\n};\nexport const updateDoctor = async (id, doctor) => {\n  // Sanitize inputs\n  const sanitizedDoctor = sanitizeObject(doctor);\n  const response = await fetch(`${API_BASE_URL}/doctors/${id}`, {\n    method: 'PUT',\n    headers: getHeaders(),\n    body: JSON.stringify(sanitizedDoctor)\n  });\n  if (!response.ok) {\n    const errorData = await response.json().catch(() => ({}));\n    throw new Error(errorData.message || 'Failed to update doctor');\n  }\n  const data = await response.json();\n\n  // Clear cache for this doctor and all doctors\n  clearCache(`doctor_${id}`);\n  clearCache('doctors');\n  return data;\n};\nexport const deleteDoctor = async id => {\n  const response = await fetch(`${API_BASE_URL}/doctors/${id}`, {\n    method: 'DELETE',\n    headers: getHeaders()\n  });\n  if (!response.ok) {\n    const errorData = await response.json().catch(() => ({}));\n    throw new Error(errorData.message || 'Failed to delete doctor');\n  }\n\n  // Clear cache for this doctor and all doctors\n  clearCache(`doctor_${id}`);\n  clearCache('doctors');\n  return true;\n};\n\n// DSPs\nexport const getAllDsps = async () => {\n  const cacheKey = 'dsps';\n  const cached = getCachedData(cacheKey);\n  if (cached) {\n    return cached;\n  }\n  const response = await fetch(`${API_BASE_URL}/dsps`, {\n    method: 'GET',\n    headers: getHeaders()\n  });\n  if (!response.ok) {\n    const errorData = await response.json().catch(() => ({}));\n    throw new Error(errorData.message || 'Failed to fetch DSPs');\n  }\n  const data = await response.json();\n  setCachedData(cacheKey, data);\n  return data;\n};\nexport const getDspById = async id => {\n  const cacheKey = `dsp_${id}`;\n  const cached = getCachedData(cacheKey);\n  if (cached) {\n    return cached;\n  }\n  const response = await fetch(`${API_BASE_URL}/dsps/${id}`, {\n    method: 'GET',\n    headers: getHeaders()\n  });\n  if (!response.ok) {\n    const errorData = await response.json().catch(() => ({}));\n    throw new Error(errorData.message || 'Failed to fetch DSP');\n  }\n  const data = await response.json();\n  setCachedData(cacheKey, data);\n  return data;\n};\nexport const createDsp = async dsp => {\n  // Don't sanitize DSP data as it can break JSON structure\n  const response = await fetch(`${API_BASE_URL}/dsps`, {\n    method: 'POST',\n    headers: getHeaders(),\n    body: JSON.stringify(dsp)\n  });\n  if (!response.ok) {\n    const errorData = await response.json().catch(() => ({}));\n    throw new Error(errorData.message || 'Failed to create DSP');\n  }\n  const data = await response.json();\n\n  // Clear cache for DSPs\n  clearCache('dsps');\n  return data;\n};\nexport const updateDsp = async (id, dsp) => {\n  // Sanitize inputs\n  const sanitizedDsp = sanitizeObject(dsp);\n  const response = await fetch(`${API_BASE_URL}/dsps/${id}`, {\n    method: 'PUT',\n    headers: getHeaders(),\n    body: JSON.stringify(sanitizedDsp)\n  });\n  if (!response.ok) {\n    const errorData = await response.json().catch(() => ({}));\n    throw new Error(errorData.message || 'Failed to update DSP');\n  }\n  const data = await response.json();\n\n  // Clear cache for this DSP and all DSPs\n  clearCache(`dsp_${id}`);\n  clearCache('dsps');\n  return data;\n};\nexport const deleteDsp = async id => {\n  const response = await fetch(`${API_BASE_URL}/dsps/${id}`, {\n    method: 'DELETE',\n    headers: getHeaders()\n  });\n  if (!response.ok) {\n    const errorData = await response.json().catch(() => ({}));\n    throw new Error(errorData.message || 'Failed to delete DSP');\n  }\n\n  // Clear cache for this DSP and all DSPs\n  clearCache(`dsp_${id}`);\n  clearCache('dsps');\n  return true;\n};\n\n// Visits\nexport const getAllVisits = async () => {\n  const cacheKey = 'visits';\n  const cached = getCachedData(cacheKey);\n  if (cached) {\n    return cached;\n  }\n  const response = await fetch(`${API_BASE_URL}/visits`, {\n    method: 'GET',\n    headers: getHeaders()\n  });\n  if (!response.ok) {\n    const errorData = await response.json().catch(() => ({}));\n    throw new Error(errorData.message || 'Failed to fetch visits');\n  }\n  const data = await response.json();\n  setCachedData(cacheKey, data);\n  return data;\n};\nexport const getVisitById = async id => {\n  const cacheKey = `visit_${id}`;\n  const cached = getCachedData(cacheKey);\n  if (cached) {\n    return cached;\n  }\n  const response = await fetch(`${API_BASE_URL}/visits/${id}`, {\n    method: 'GET',\n    headers: getHeaders()\n  });\n  if (!response.ok) {\n    const errorData = await response.json().catch(() => ({}));\n    throw new Error(errorData.message || 'Failed to fetch visit');\n  }\n  const data = await response.json();\n  setCachedData(cacheKey, data);\n  return data;\n};\nexport const createVisit = async visit => {\n  // Sanitize inputs\n  const sanitizedVisit = sanitizeObject(visit);\n  const response = await fetch(`${API_BASE_URL}/visits`, {\n    method: 'POST',\n    headers: getHeaders(),\n    body: JSON.stringify(sanitizedVisit)\n  });\n  if (!response.ok) {\n    const errorData = await response.json().catch(() => ({}));\n    throw new Error(errorData.message || 'Failed to create visit');\n  }\n  const data = await response.json();\n\n  // Clear cache for visits\n  clearCache('visits');\n  return data;\n};\nexport const updateVisit = async (id, visit) => {\n  // Sanitize inputs\n  const sanitizedVisit = sanitizeObject(visit);\n  const response = await fetch(`${API_BASE_URL}/visits/${id}`, {\n    method: 'PUT',\n    headers: getHeaders(),\n    body: JSON.stringify(sanitizedVisit)\n  });\n  if (!response.ok) {\n    const errorData = await response.json().catch(() => ({}));\n    throw new Error(errorData.message || 'Failed to update visit');\n  }\n  const data = await response.json();\n\n  // Clear cache for this visit and all visits\n  clearCache(`visit_${id}`);\n  clearCache('visits');\n  return data;\n};\nexport const deleteVisit = async id => {\n  const response = await fetch(`${API_BASE_URL}/visits/${id}`, {\n    method: 'DELETE',\n    headers: getHeaders()\n  });\n  if (!response.ok) {\n    const errorData = await response.json().catch(() => ({}));\n    throw new Error(errorData.message || 'Failed to delete visit');\n  }\n\n  // Clear cache for this visit and all visits\n  clearCache(`visit_${id}`);\n  clearCache('visits');\n  return true;\n};\n\n// Get visits for a specific workplace\nexport const getVisitsForWorkplace = async workplaceId => {\n  const cacheKey = `visits_workplace_${workplaceId}`;\n  const cached = getCachedData(cacheKey);\n  if (cached) {\n    return cached;\n  }\n  const response = await fetch(`${API_BASE_URL}/workplaces/${workplaceId}/visits`, {\n    method: 'GET',\n    headers: getHeaders()\n  });\n  if (!response.ok) {\n    const errorData = await response.json().catch(() => ({}));\n    throw new Error(errorData.message || 'Failed to fetch visits for workplace');\n  }\n  const data = await response.json();\n  setCachedData(cacheKey, data);\n  return data;\n};\n\n// Get visits for a specific expert\nexport const getVisitsForExpert = async expertId => {\n  const cacheKey = `visits_expert_${expertId}`;\n  const cached = getCachedData(cacheKey);\n  if (cached) {\n    return cached;\n  }\n  const response = await fetch(`${API_BASE_URL}/experts/${expertId}/visits`, {\n    method: 'GET',\n    headers: getHeaders()\n  });\n  if (!response.ok) {\n    const errorData = await response.json().catch(() => ({}));\n    throw new Error(errorData.message || 'Failed to fetch visits for expert');\n  }\n  const data = await response.json();\n  setCachedData(cacheKey, data);\n  return data;\n};","map":{"version":3,"names":["API_BASE_URL","process","env","REACT_APP_API_URL","console","log","authToken","organizationId","window","localStorage","getItem","storedOrgId","parseInt","RATE_LIMIT_WINDOW","MAX_REQUESTS","requestTimestamps","checkRateLimit","now","Date","length","shift","Error","push","sanitizeInput","input","replace","sanitizeObject","obj","Array","isArray","map","sanitized","key","hasOwnProperty","apiCache","Map","CACHE_TTL","getCachedData","cached","get","timestamp","data","delete","setCachedData","set","clearCache","pattern","keys","from","matchingKeys","filter","includes","forEach","getHeaders","contentType","headers","toString","registerOrganization","orgData","_data$user","sanitizedData","response","fetch","method","body","JSON","stringify","ok","errorData","json","catch","message","token","setAuthToken","user","setOrganizationId","getAllSystemConfig","cacheKey","getSystemConfigByKey","upsertSystemConfig","config","sanitizedConfig","deleteSystemConfig","login","username","password","_data$user2","sanitizedUsername","sanitizedPassword","requestBody","loginUrl","status","headersArray","value","register","userData","_data$user3","getCurrentUser","updateUserProfile","setItem","orgId","clearAuth","removeItem","getAllWorkplaces","errorMessage","statusText","getWorkplaceById","id","createWorkplace","workplace","updateWorkplace","deleteWorkplace","getAvailableExperts","workplaceId","getAvailableDoctors","getAvailableDsps","getAllExperts","getExpertById","createExpert","expert","updateExpert","deleteExpert","getExpertAssignedWorkplaces","expertId","getDoctorAssignedWorkplaces","doctorId","getDspAssignedWorkplaces","dspId","getAllDoctors","getDoctorById","createDoctor","doctor","updateDoctor","sanitizedDoctor","deleteDoctor","getAllDsps","getDspById","createDsp","dsp","updateDsp","sanitizedDsp","deleteDsp","getAllVisits","getVisitById","createVisit","visit","sanitizedVisit","updateVisit","deleteVisit","getVisitsForWorkplace","getVisitsForExpert"],"sources":["C:/Users/USER/OneDrive/Desktop/YAZILIM/PRO/OSGB_System/frontend/OSGB.Frontend/src/services/api.ts"],"sourcesContent":["// Updated API service with authentication support\r\nconst API_BASE_URL = process.env.REACT_APP_API_URL || 'http://localhost:5005/api';\r\nconsole.log('API_BASE_URL:', API_BASE_URL);\r\n\r\n// Store token in memory (in a real app, you might want to use localStorage)\r\nlet authToken: string | null = null;\r\nlet organizationId: number | null = null;\r\n\r\n// Initialize auth token and organization ID from localStorage\r\nif (typeof window !== 'undefined') {\r\n  authToken = localStorage.getItem('authToken');\r\n  const storedOrgId = localStorage.getItem('organizationId');\r\n  if (storedOrgId) {\r\n    organizationId = parseInt(storedOrgId, 10);\r\n  }\r\n}\r\n\r\n// Rate limiting\r\nconst RATE_LIMIT_WINDOW = 60000; // 1 minute\r\nconst MAX_REQUESTS = 100;\r\nconst requestTimestamps: number[] = [];\r\n\r\nconst checkRateLimit = () => {\r\n  const now = Date.now();\r\n  // Remove timestamps older than the window\r\n  while (requestTimestamps.length > 0 && requestTimestamps[0] < now - RATE_LIMIT_WINDOW) {\r\n    requestTimestamps.shift();\r\n  }\r\n  \r\n  // Check if we've exceeded the limit\r\n  if (requestTimestamps.length >= MAX_REQUESTS) {\r\n    throw new Error('Rate limit exceeded. Please try again later.');\r\n  }\r\n  \r\n  // Add current timestamp\r\n  requestTimestamps.push(now);\r\n};\r\n\r\n// Input sanitization to prevent XSS\r\nconst sanitizeInput = (input: string): string => {\r\n  // For login credentials, we don't want to convert to HTML entities\r\n  // Just strip any HTML tags if they exist\r\n  return input.replace(/<[^>]*>/g, '');\r\n};\r\n\r\nconst sanitizeObject = (obj: any): any => {\r\n  if (typeof obj === 'string') {\r\n    return sanitizeInput(obj);\r\n  }\r\n  \r\n  if (Array.isArray(obj)) {\r\n    return obj.map(sanitizeObject);\r\n  }\r\n  \r\n  if (obj && typeof obj === 'object') {\r\n    const sanitized: any = {};\r\n    for (const key in obj) {\r\n      if (obj.hasOwnProperty(key)) {\r\n        sanitized[key] = sanitizeObject(obj[key]);\r\n      }\r\n    }\r\n    return sanitized;\r\n  }\r\n  \r\n  return obj;\r\n};\r\n\r\n// Simple in-memory cache\r\nconst apiCache = new Map<string, { data: any; timestamp: number }>();\r\nconst CACHE_TTL = 5 * 60 * 1000; // 5 minutes\r\n\r\nconst getCachedData = (key: string) => {\r\n  const cached = apiCache.get(key);\r\n  if (cached && Date.now() - cached.timestamp < CACHE_TTL) {\r\n    return cached.data;\r\n  }\r\n  apiCache.delete(key);\r\n  return null;\r\n};\r\n\r\nconst setCachedData = (key: string, data: any) => {\r\n  apiCache.set(key, { data, timestamp: Date.now() });\r\n};\r\n\r\nconst clearCache = (pattern: string) => {\r\n  const keys = Array.from(apiCache.keys());\r\n  const matchingKeys = keys.filter(key => key.includes(pattern));\r\n  matchingKeys.forEach(key => apiCache.delete(key));\r\n};\r\n\r\n// Create headers with authentication\r\nconst getHeaders = (contentType: string = 'application/json') => {\r\n  // Check rate limit before each request\r\n  checkRateLimit();\r\n  \r\n  const headers: Record<string, string> = {\r\n    'Content-Type': contentType,\r\n  };\r\n  \r\n  if (authToken) {\r\n    headers['Authorization'] = `Bearer ${authToken}`;\r\n  }\r\n  \r\n  if (organizationId) {\r\n    headers['x-organization-id'] = organizationId.toString();\r\n  }\r\n  \r\n  return headers;\r\n};\r\n\r\n// OSGB self-registration\r\nexport const registerOrganization = async (orgData: {\r\n  organizationName: string;\r\n  adminUsername: string;\r\n  adminPassword: string;\r\n  adminFullName: string;\r\n  adminEmail?: string;\r\n}) => {\r\n  // Sanitize inputs\r\n  const sanitizedData = sanitizeObject(orgData);\r\n  \r\n  const response = await fetch(`${API_BASE_URL}/auth/register-organization`, {\r\n    method: 'POST',\r\n    headers: getHeaders(),\r\n    body: JSON.stringify(sanitizedData),\r\n  });\r\n  \r\n  if (!response.ok) {\r\n    const errorData = await response.json().catch(() => ({}));\r\n    throw new Error(errorData.message || 'Organization registration failed');\r\n  }\r\n  \r\n  const data = await response.json();\r\n  \r\n  // Set auth token if provided\r\n  if (data.token) {\r\n    setAuthToken(data.token);\r\n  }\r\n  \r\n  // Set organization ID if provided\r\n  if (data.user?.organizationId) {\r\n    setOrganizationId(data.user.organizationId);\r\n  }\r\n  \r\n  return data;\r\n};\r\n\r\n// System configuration\r\nexport const getAllSystemConfig = async () => {\r\n  const cacheKey = 'system_config';\r\n  const cached = getCachedData(cacheKey);\r\n  if (cached) {\r\n    return cached;\r\n  }\r\n  \r\n  const response = await fetch(`${API_BASE_URL}/system-config`, {\r\n    method: 'GET',\r\n    headers: getHeaders(),\r\n  });\r\n  \r\n  if (!response.ok) {\r\n    const errorData = await response.json().catch(() => ({}));\r\n    throw new Error(errorData.message || 'Failed to fetch system configuration');\r\n  }\r\n  \r\n  const data = await response.json();\r\n  setCachedData(cacheKey, data);\r\n  return data;\r\n};\r\n\r\nexport const getSystemConfigByKey = async (key: string) => {\r\n  const cacheKey = `system_config_${key}`;\r\n  const cached = getCachedData(cacheKey);\r\n  if (cached) {\r\n    return cached;\r\n  }\r\n  \r\n  const response = await fetch(`${API_BASE_URL}/system-config/${key}`, {\r\n    method: 'GET',\r\n    headers: getHeaders(),\r\n  });\r\n  \r\n  if (!response.ok) {\r\n    const errorData = await response.json().catch(() => ({}));\r\n    throw new Error(errorData.message || 'Failed to fetch system configuration');\r\n  }\r\n  \r\n  const data = await response.json();\r\n  setCachedData(cacheKey, data);\r\n  return data;\r\n};\r\n\r\nexport const upsertSystemConfig = async (config: { key: string; value: string; description?: string }) => {\r\n  // Sanitize inputs\r\n  const sanitizedConfig = sanitizeObject(config);\r\n  \r\n  const response = await fetch(`${API_BASE_URL}/system-config`, {\r\n    method: 'POST',\r\n    headers: getHeaders(),\r\n    body: JSON.stringify(sanitizedConfig),\r\n  });\r\n  \r\n  if (!response.ok) {\r\n    const errorData = await response.json().catch(() => ({}));\r\n    throw new Error(errorData.message || 'Failed to update system configuration');\r\n  }\r\n  \r\n  const data = await response.json();\r\n  \r\n  // Clear cache for system config\r\n  clearCache('system_config');\r\n  clearCache(`system_config_${config.key}`);\r\n  \r\n  return data;\r\n};\r\n\r\nexport const deleteSystemConfig = async (key: string) => {\r\n  const response = await fetch(`${API_BASE_URL}/system-config/${key}`, {\r\n    method: 'DELETE',\r\n    headers: getHeaders(),\r\n  });\r\n  \r\n  if (!response.ok) {\r\n    const errorData = await response.json().catch(() => ({}));\r\n    throw new Error(errorData.message || 'Failed to delete system configuration');\r\n  }\r\n  \r\n  // Clear cache for system config\r\n  clearCache('system_config');\r\n  clearCache(`system_config_${key}`);\r\n  \r\n  return true;\r\n};\r\n\r\n// User authentication\r\nexport const login = async (username: string, password: string) => {\r\n  // Sanitize inputs\r\n  const sanitizedUsername = sanitizeInput(username);\r\n  const sanitizedPassword = sanitizeInput(password);\r\n  \r\n  // Debug logging\r\n  console.log('Attempting login with:', { username: sanitizedUsername, password: sanitizedPassword });\r\n  \r\n  // Create the request body\r\n  const requestBody = { username: sanitizedUsername, password: sanitizedPassword };\r\n  console.log('Request body:', requestBody);\r\n  console.log('Stringified request body:', JSON.stringify(requestBody));\r\n  \r\n  const loginUrl = `${API_BASE_URL}/auth/login`;\r\n  console.log('Login URL:', loginUrl);\r\n  \r\n  const response = await fetch(loginUrl, {\r\n    method: 'POST',\r\n    headers: getHeaders(),\r\n    body: JSON.stringify(requestBody),\r\n  });\r\n  \r\n  console.log('Login response status:', response.status);\r\n  // Convert headers to array for logging\r\n  const headersArray: [string, string][] = [];\r\n  response.headers.forEach((value: string, key: string) => {\r\n    headersArray.push([key, value]);\r\n  });\r\n  console.log('Login response headers:', headersArray);\r\n  \r\n  if (!response.ok) {\r\n    const errorData = await response.json().catch(() => ({}));\r\n    console.log('Login error data:', errorData);\r\n    throw new Error(errorData.message || 'Login failed');\r\n  }\r\n  \r\n  const data = await response.json();\r\n  console.log('Login success data:', data);\r\n  \r\n  // Set auth token if provided\r\n  if (data.token) {\r\n    setAuthToken(data.token);\r\n  }\r\n  \r\n  // Set organization ID if provided\r\n  if (data.user?.organizationId) {\r\n    setOrganizationId(data.user.organizationId);\r\n  }\r\n  \r\n  return data;\r\n};\r\n\r\nexport const register = async (userData: { username: string; password: string; fullName: string }) => {\r\n  // Sanitize inputs\r\n  const sanitizedData = sanitizeObject(userData);\r\n  \r\n  const response = await fetch(`${API_BASE_URL}/auth/register`, {\r\n    method: 'POST',\r\n    headers: getHeaders(),\r\n    body: JSON.stringify(sanitizedData),\r\n  });\r\n  \r\n  if (!response.ok) {\r\n    const errorData = await response.json().catch(() => ({}));\r\n    throw new Error(errorData.message || 'Registration failed');\r\n  }\r\n  \r\n  const data = await response.json();\r\n  \r\n  // Set auth token if provided\r\n  if (data.token) {\r\n    setAuthToken(data.token);\r\n  }\r\n  \r\n  // Set organization ID if provided\r\n  if (data.user?.organizationId) {\r\n    setOrganizationId(data.user.organizationId);\r\n  }\r\n  \r\n  return data;\r\n};\r\n\r\n// Get current user profile\r\nexport const getCurrentUser = async () => {\r\n  const cacheKey = 'current_user';\r\n  const cached = getCachedData(cacheKey);\r\n  if (cached) {\r\n    return cached;\r\n  }\r\n  \r\n  const response = await fetch(`${API_BASE_URL}/auth/me`, {\r\n    method: 'GET',\r\n    headers: getHeaders(),\r\n  });\r\n  \r\n  if (!response.ok) {\r\n    const errorData = await response.json().catch(() => ({}));\r\n    throw new Error(errorData.message || 'Failed to fetch user profile');\r\n  }\r\n  \r\n  const data = await response.json();\r\n  setCachedData(cacheKey, data);\r\n  return data;\r\n};\r\n\r\n// Update user profile\r\nexport const updateUserProfile = async (userData: Partial<{ fullName: string; email: string }>) => {\r\n  // Sanitize inputs\r\n  const sanitizedData = sanitizeObject(userData);\r\n  \r\n  const response = await fetch(`${API_BASE_URL}/auth/me`, {\r\n    method: 'PUT',\r\n    headers: getHeaders(),\r\n    body: JSON.stringify(sanitizedData),\r\n  });\r\n  \r\n  if (!response.ok) {\r\n    const errorData = await response.json().catch(() => ({}));\r\n    throw new Error(errorData.message || 'Failed to update user profile');\r\n  }\r\n  \r\n  const data = await response.json();\r\n  clearCache('current_user');\r\n  return data;\r\n};\r\n\r\n// Set authentication token\r\nexport const setAuthToken = (token: string) => {\r\n  authToken = token;\r\n  localStorage.setItem('authToken', token);\r\n};\r\n\r\n// Set organization ID\r\nexport const setOrganizationId = (orgId: number) => {\r\n  organizationId = orgId;\r\n  localStorage.setItem('organizationId', orgId.toString());\r\n};\r\n\r\n// Clear authentication\r\nexport const clearAuth = () => {\r\n  authToken = null;\r\n  organizationId = null;\r\n  localStorage.removeItem('authToken');\r\n  localStorage.removeItem('organizationId');\r\n};\r\n\r\n// Workplaces\r\nexport const getAllWorkplaces = async () => {\r\n  const cacheKey = 'workplaces';\r\n  const cached = getCachedData(cacheKey);\r\n  if (cached) {\r\n    return cached;\r\n  }\r\n  \r\n  const response = await fetch(`${API_BASE_URL}/workplaces`, {\r\n    method: 'GET',\r\n    headers: getHeaders(),\r\n  });\r\n  \r\n  if (!response.ok) {\r\n    const errorData = await response.json().catch(() => ({}));\r\n    const errorMessage = errorData.message || `Failed to fetch workplaces: ${response.status} ${response.statusText}`;\r\n    throw new Error(errorMessage);\r\n  }\r\n  \r\n  const data = await response.json();\r\n  setCachedData(cacheKey, data);\r\n  return data;\r\n};\r\n\r\nexport const getWorkplaceById = async (id: number) => {\r\n  const cacheKey = `workplace_${id}`;\r\n  const cached = getCachedData(cacheKey);\r\n  if (cached) {\r\n    return cached;\r\n  }\r\n  \r\n  const response = await fetch(`${API_BASE_URL}/workplaces/${id}`, {\r\n    method: 'GET',\r\n    headers: getHeaders(),\r\n  });\r\n  \r\n  if (!response.ok) {\r\n    const errorData = await response.json().catch(() => ({}));\r\n    throw new Error(errorData.message || 'Failed to fetch workplace');\r\n  }\r\n  \r\n  const data = await response.json();\r\n  setCachedData(cacheKey, data);\r\n  return data;\r\n};\r\n\r\nexport const createWorkplace = async (workplace: any) => {\r\n  // Don't sanitize workplace data as it can break JSON structure\r\n  const response = await fetch(`${API_BASE_URL}/workplaces`, {\r\n    method: 'POST',\r\n    headers: getHeaders(),\r\n    body: JSON.stringify(workplace),\r\n  });\r\n  \r\n  if (!response.ok) {\r\n    const errorData = await response.json().catch(() => ({}));\r\n    throw new Error(errorData.message || 'Failed to create workplace');\r\n  }\r\n  \r\n  const data = await response.json();\r\n  \r\n  // Clear cache for workplaces\r\n  clearCache('workplaces');\r\n  \r\n  return data;\r\n};\r\n\r\nexport const updateWorkplace = async (id: number, workplace: any) => {\r\n  // Don't sanitize workplace data as it can break JSON structure\r\n  const response = await fetch(`${API_BASE_URL}/workplaces/${id}`, {\r\n    method: 'PUT',\r\n    headers: getHeaders(),\r\n    body: JSON.stringify(workplace),\r\n  });\r\n  \r\n  if (!response.ok) {\r\n    const errorData = await response.json().catch(() => ({}));\r\n    throw new Error(errorData.message || 'Failed to update workplace');\r\n  }\r\n  \r\n  const data = await response.json();\r\n  \r\n  // Clear cache for this workplace and all workplaces\r\n  clearCache(`workplace_${id}`);\r\n  clearCache('workplaces');\r\n  \r\n  return data;\r\n};\r\n\r\nexport const deleteWorkplace = async (id: number) => {\r\n  const response = await fetch(`${API_BASE_URL}/workplaces/${id}`, {\r\n    method: 'DELETE',\r\n    headers: getHeaders(),\r\n  });\r\n  \r\n  if (!response.ok) {\r\n    const errorData = await response.json().catch(() => ({}));\r\n    throw new Error(errorData.message || 'Failed to delete workplace');\r\n  }\r\n  \r\n  // Clear cache for this workplace and all workplaces\r\n  clearCache(`workplace_${id}`);\r\n  clearCache('workplaces');\r\n  \r\n  return true;\r\n};\r\n\r\n// Get available experts for a workplace based on risk level and employee count\r\nexport const getAvailableExperts = async (workplaceId: number) => {\r\n  const cacheKey = `available_experts_${workplaceId}`;\r\n  const cached = getCachedData(cacheKey);\r\n  if (cached) {\r\n    return cached;\r\n  }\r\n  \r\n  const response = await fetch(`${API_BASE_URL}/workplaces/${workplaceId}/available-experts`, {\r\n    method: 'GET',\r\n    headers: getHeaders(),\r\n  });\r\n  \r\n  if (!response.ok) {\r\n    const errorData = await response.json().catch(() => ({}));\r\n    const errorMessage = errorData.message || `Failed to fetch available experts: ${response.status} ${response.statusText}`;\r\n    throw new Error(errorMessage);\r\n  }\r\n  \r\n  const data = await response.json();\r\n  setCachedData(cacheKey, data);\r\n  return data;\r\n};\r\n\r\n// Get available doctors for a workplace based on risk level and employee count\r\nexport const getAvailableDoctors = async (workplaceId: number) => {\r\n  const cacheKey = `available_doctors_${workplaceId}`;\r\n  const cached = getCachedData(cacheKey);\r\n  if (cached) {\r\n    return cached;\r\n  }\r\n  \r\n  const response = await fetch(`${API_BASE_URL}/workplaces/${workplaceId}/available-doctors`, {\r\n    method: 'GET',\r\n    headers: getHeaders(),\r\n  });\r\n  \r\n  if (!response.ok) {\r\n    const errorData = await response.json().catch(() => ({}));\r\n    const errorMessage = errorData.message || `Failed to fetch available doctors: ${response.status} ${response.statusText}`;\r\n    throw new Error(errorMessage);\r\n  }\r\n  \r\n  const data = await response.json();\r\n  setCachedData(cacheKey, data);\r\n  return data;\r\n};\r\n\r\n// Get available DSPs for a workplace based on risk level and employee count\r\nexport const getAvailableDsps = async (workplaceId: number) => {\r\n  const cacheKey = `available_dsps_${workplaceId}`;\r\n  const cached = getCachedData(cacheKey);\r\n  if (cached) {\r\n    return cached;\r\n  }\r\n  \r\n  const response = await fetch(`${API_BASE_URL}/workplaces/${workplaceId}/available-dsps`, {\r\n    method: 'GET',\r\n    headers: getHeaders(),\r\n  });\r\n  \r\n  if (!response.ok) {\r\n    const errorData = await response.json().catch(() => ({}));\r\n    const errorMessage = errorData.message || `Failed to fetch available DSPs: ${response.status} ${response.statusText}`;\r\n    throw new Error(errorMessage);\r\n  }\r\n  \r\n  const data = await response.json();\r\n  setCachedData(cacheKey, data);\r\n  return data;\r\n};\r\n\r\n// Experts\r\nexport const getAllExperts = async () => {\r\n  const cacheKey = 'experts';\r\n  const cached = getCachedData(cacheKey);\r\n  if (cached) {\r\n    return cached;\r\n  }\r\n  \r\n  const response = await fetch(`${API_BASE_URL}/experts`, {\r\n    method: 'GET',\r\n    headers: getHeaders(),\r\n  });\r\n  \r\n  if (!response.ok) {\r\n    const errorData = await response.json().catch(() => ({}));\r\n    const errorMessage = errorData.message || `Failed to fetch experts: ${response.status} ${response.statusText}`;\r\n    throw new Error(errorMessage);\r\n  }\r\n  \r\n  const data = await response.json();\r\n  setCachedData(cacheKey, data);\r\n  return data;\r\n};\r\n\r\nexport const getExpertById = async (id: number) => {\r\n  const cacheKey = `expert_${id}`;\r\n  const cached = getCachedData(cacheKey);\r\n  if (cached) {\r\n    return cached;\r\n  }\r\n  \r\n  const response = await fetch(`${API_BASE_URL}/experts/${id}`, {\r\n    method: 'GET',\r\n    headers: getHeaders(),\r\n  });\r\n  \r\n  if (!response.ok) {\r\n    const errorData = await response.json().catch(() => ({}));\r\n    throw new Error(errorData.message || 'Failed to fetch expert');\r\n  }\r\n  \r\n  const data = await response.json();\r\n  setCachedData(cacheKey, data);\r\n  return data;\r\n};\r\n\r\nexport const createExpert = async (expert: any) => {\r\n  // Don't sanitize expert data as it can break JSON structure\r\n  const response = await fetch(`${API_BASE_URL}/experts`, {\r\n    method: 'POST',\r\n    headers: getHeaders(),\r\n    body: JSON.stringify(expert),\r\n  });\r\n  \r\n  if (!response.ok) {\r\n    const errorData = await response.json().catch(() => ({}));\r\n    throw new Error(errorData.message || 'Failed to create expert');\r\n  }\r\n  \r\n  const data = await response.json();\r\n  \r\n  // Clear cache for experts\r\n  clearCache('experts');\r\n  \r\n  return data;\r\n};\r\n\r\nexport const updateExpert = async (id: number, expert: any) => {\r\n  // Don't sanitize expert data as it can break JSON structure\r\n  const response = await fetch(`${API_BASE_URL}/experts/${id}`, {\r\n    method: 'PUT',\r\n    headers: getHeaders(),\r\n    body: JSON.stringify(expert),\r\n  });\r\n  \r\n  if (!response.ok) {\r\n    const errorData = await response.json().catch(() => ({}));\r\n    throw new Error(errorData.message || 'Failed to update expert');\r\n  }\r\n  \r\n  const data = await response.json();\r\n  \r\n  // Clear cache for this expert and all experts\r\n  clearCache(`expert_${id}`);\r\n  clearCache('experts');\r\n  \r\n  return data;\r\n};\r\n\r\nexport const deleteExpert = async (id: number) => {\r\n  const response = await fetch(`${API_BASE_URL}/experts/${id}`, {\r\n    method: 'DELETE',\r\n    headers: getHeaders(),\r\n  });\r\n  \r\n  if (!response.ok) {\r\n    const errorData = await response.json().catch(() => ({}));\r\n    throw new Error(errorData.message || 'Failed to delete expert');\r\n  }\r\n  \r\n  // Clear cache for this expert and all experts\r\n  clearCache(`expert_${id}`);\r\n  clearCache('experts');\r\n  \r\n  return true;\r\n};\r\n\r\n// Get assigned workplaces for an expert\r\nexport const getExpertAssignedWorkplaces = async (expertId: number) => {\r\n  const cacheKey = `expert_assigned_workplaces_${expertId}`;\r\n  const cached = getCachedData(cacheKey);\r\n  if (cached) {\r\n    return cached;\r\n  }\r\n  \r\n  const response = await fetch(`${API_BASE_URL}/experts/${expertId}/assigned-workplaces`, {\r\n    method: 'GET',\r\n    headers: getHeaders(),\r\n  });\r\n  \r\n  if (!response.ok) {\r\n    const errorData = await response.json().catch(() => ({}));\r\n    throw new Error(errorData.message || 'Failed to fetch assigned workplaces for expert');\r\n  }\r\n  \r\n  const data = await response.json();\r\n  setCachedData(cacheKey, data);\r\n  return data;\r\n};\r\n\r\n// Get assigned workplaces for a doctor\r\nexport const getDoctorAssignedWorkplaces = async (doctorId: number) => {\r\n  const cacheKey = `doctor_assigned_workplaces_${doctorId}`;\r\n  const cached = getCachedData(cacheKey);\r\n  if (cached) {\r\n    return cached;\r\n  }\r\n  \r\n  const response = await fetch(`${API_BASE_URL}/doctors/${doctorId}/assigned-workplaces`, {\r\n    method: 'GET',\r\n    headers: getHeaders(),\r\n  });\r\n  \r\n  if (!response.ok) {\r\n    const errorData = await response.json().catch(() => ({}));\r\n    throw new Error(errorData.message || 'Failed to fetch assigned workplaces for doctor');\r\n  }\r\n  \r\n  const data = await response.json();\r\n  setCachedData(cacheKey, data);\r\n  return data;\r\n};\r\n\r\n// Get assigned workplaces for a DSP\r\nexport const getDspAssignedWorkplaces = async (dspId: number) => {\r\n  const cacheKey = `dsp_assigned_workplaces_${dspId}`;\r\n  const cached = getCachedData(cacheKey);\r\n  if (cached) {\r\n    return cached;\r\n  }\r\n  \r\n  const response = await fetch(`${API_BASE_URL}/dsps/${dspId}/assigned-workplaces`, {\r\n    method: 'GET',\r\n    headers: getHeaders(),\r\n  });\r\n  \r\n  if (!response.ok) {\r\n    const errorData = await response.json().catch(() => ({}));\r\n    throw new Error(errorData.message || 'Failed to fetch assigned workplaces for DSP');\r\n  }\r\n  \r\n  const data = await response.json();\r\n  setCachedData(cacheKey, data);\r\n  return data;\r\n};\r\n\r\n// Doctors\r\nexport const getAllDoctors = async () => {\r\n  const cacheKey = 'doctors';\r\n  const cached = getCachedData(cacheKey);\r\n  if (cached) {\r\n    return cached;\r\n  }\r\n  \r\n  const response = await fetch(`${API_BASE_URL}/doctors`, {\r\n    method: 'GET',\r\n    headers: getHeaders(),\r\n  });\r\n  \r\n  if (!response.ok) {\r\n    const errorData = await response.json().catch(() => ({}));\r\n    throw new Error(errorData.message || 'Failed to fetch doctors');\r\n  }\r\n  \r\n  const data = await response.json();\r\n  console.log('getAllDoctors response:', data);\r\n  setCachedData(cacheKey, data);\r\n  return data;\r\n};\r\n\r\nexport const getDoctorById = async (id: number) => {\r\n  const cacheKey = `doctor_${id}`;\r\n  const cached = getCachedData(cacheKey);\r\n  if (cached) {\r\n    return cached;\r\n  }\r\n  \r\n  const response = await fetch(`${API_BASE_URL}/doctors/${id}`, {\r\n    method: 'GET',\r\n    headers: getHeaders(),\r\n  });\r\n  \r\n  if (!response.ok) {\r\n    const errorData = await response.json().catch(() => ({}));\r\n    throw new Error(errorData.message || 'Failed to fetch doctor');\r\n  }\r\n  \r\n  const data = await response.json();\r\n  setCachedData(cacheKey, data);\r\n  return data;\r\n};\r\n\r\nexport const createDoctor = async (doctor: any) => {\r\n  // Don't sanitize doctor data as it can break JSON structure\r\n  const response = await fetch(`${API_BASE_URL}/doctors`, {\r\n    method: 'POST',\r\n    headers: getHeaders(),\r\n    body: JSON.stringify(doctor),\r\n  });\r\n  \r\n  if (!response.ok) {\r\n    const errorData = await response.json().catch(() => ({}));\r\n    throw new Error(errorData.message || 'Failed to create doctor');\r\n  }\r\n  \r\n  const data = await response.json();\r\n  \r\n  // Clear cache for doctors\r\n  clearCache('doctors');\r\n  \r\n  return data;\r\n};\r\n\r\nexport const updateDoctor = async (id: number, doctor: any) => {\r\n  // Sanitize inputs\r\n  const sanitizedDoctor = sanitizeObject(doctor);\r\n  \r\n  const response = await fetch(`${API_BASE_URL}/doctors/${id}`, {\r\n    method: 'PUT',\r\n    headers: getHeaders(),\r\n    body: JSON.stringify(sanitizedDoctor),\r\n  });\r\n  \r\n  if (!response.ok) {\r\n    const errorData = await response.json().catch(() => ({}));\r\n    throw new Error(errorData.message || 'Failed to update doctor');\r\n  }\r\n  \r\n  const data = await response.json();\r\n  \r\n  // Clear cache for this doctor and all doctors\r\n  clearCache(`doctor_${id}`);\r\n  clearCache('doctors');\r\n  \r\n  return data;\r\n};\r\n\r\nexport const deleteDoctor = async (id: number) => {\r\n  const response = await fetch(`${API_BASE_URL}/doctors/${id}`, {\r\n    method: 'DELETE',\r\n    headers: getHeaders(),\r\n  });\r\n  \r\n  if (!response.ok) {\r\n    const errorData = await response.json().catch(() => ({}));\r\n    throw new Error(errorData.message || 'Failed to delete doctor');\r\n  }\r\n  \r\n  // Clear cache for this doctor and all doctors\r\n  clearCache(`doctor_${id}`);\r\n  clearCache('doctors');\r\n  \r\n  return true;\r\n};\r\n\r\n// DSPs\r\nexport const getAllDsps = async () => {\r\n  const cacheKey = 'dsps';\r\n  const cached = getCachedData(cacheKey);\r\n  if (cached) {\r\n    return cached;\r\n  }\r\n  \r\n  const response = await fetch(`${API_BASE_URL}/dsps`, {\r\n    method: 'GET',\r\n    headers: getHeaders(),\r\n  });\r\n  \r\n  if (!response.ok) {\r\n    const errorData = await response.json().catch(() => ({}));\r\n    throw new Error(errorData.message || 'Failed to fetch DSPs');\r\n  }\r\n  \r\n  const data = await response.json();\r\n  setCachedData(cacheKey, data);\r\n  return data;\r\n};\r\n\r\nexport const getDspById = async (id: number) => {\r\n  const cacheKey = `dsp_${id}`;\r\n  const cached = getCachedData(cacheKey);\r\n  if (cached) {\r\n    return cached;\r\n  }\r\n  \r\n  const response = await fetch(`${API_BASE_URL}/dsps/${id}`, {\r\n    method: 'GET',\r\n    headers: getHeaders(),\r\n  });\r\n  \r\n  if (!response.ok) {\r\n    const errorData = await response.json().catch(() => ({}));\r\n    throw new Error(errorData.message || 'Failed to fetch DSP');\r\n  }\r\n  \r\n  const data = await response.json();\r\n  setCachedData(cacheKey, data);\r\n  return data;\r\n};\r\n\r\nexport const createDsp = async (dsp: any) => {\r\n  // Don't sanitize DSP data as it can break JSON structure\r\n  const response = await fetch(`${API_BASE_URL}/dsps`, {\r\n    method: 'POST',\r\n    headers: getHeaders(),\r\n    body: JSON.stringify(dsp),\r\n  });\r\n  \r\n  if (!response.ok) {\r\n    const errorData = await response.json().catch(() => ({}));\r\n    throw new Error(errorData.message || 'Failed to create DSP');\r\n  }\r\n  \r\n  const data = await response.json();\r\n  \r\n  // Clear cache for DSPs\r\n  clearCache('dsps');\r\n  \r\n  return data;\r\n};\r\n\r\nexport const updateDsp = async (id: number, dsp: any) => {\r\n  // Sanitize inputs\r\n  const sanitizedDsp = sanitizeObject(dsp);\r\n  \r\n  const response = await fetch(`${API_BASE_URL}/dsps/${id}`, {\r\n    method: 'PUT',\r\n    headers: getHeaders(),\r\n    body: JSON.stringify(sanitizedDsp),\r\n  });\r\n  \r\n  if (!response.ok) {\r\n    const errorData = await response.json().catch(() => ({}));\r\n    throw new Error(errorData.message || 'Failed to update DSP');\r\n  }\r\n  \r\n  const data = await response.json();\r\n  \r\n  // Clear cache for this DSP and all DSPs\r\n  clearCache(`dsp_${id}`);\r\n  clearCache('dsps');\r\n  \r\n  return data;\r\n};\r\n\r\nexport const deleteDsp = async (id: number) => {\r\n  const response = await fetch(`${API_BASE_URL}/dsps/${id}`, {\r\n    method: 'DELETE',\r\n    headers: getHeaders(),\r\n  });\r\n  \r\n  if (!response.ok) {\r\n    const errorData = await response.json().catch(() => ({}));\r\n    throw new Error(errorData.message || 'Failed to delete DSP');\r\n  }\r\n  \r\n  // Clear cache for this DSP and all DSPs\r\n  clearCache(`dsp_${id}`);\r\n  clearCache('dsps');\r\n  \r\n  return true;\r\n};\r\n\r\n// Visits\r\nexport const getAllVisits = async () => {\r\n  const cacheKey = 'visits';\r\n  const cached = getCachedData(cacheKey);\r\n  if (cached) {\r\n    return cached;\r\n  }\r\n  \r\n  const response = await fetch(`${API_BASE_URL}/visits`, {\r\n    method: 'GET',\r\n    headers: getHeaders(),\r\n  });\r\n  \r\n  if (!response.ok) {\r\n    const errorData = await response.json().catch(() => ({}));\r\n    throw new Error(errorData.message || 'Failed to fetch visits');\r\n  }\r\n  \r\n  const data = await response.json();\r\n  setCachedData(cacheKey, data);\r\n  return data;\r\n};\r\n\r\nexport const getVisitById = async (id: number) => {\r\n  const cacheKey = `visit_${id}`;\r\n  const cached = getCachedData(cacheKey);\r\n  if (cached) {\r\n    return cached;\r\n  }\r\n  \r\n  const response = await fetch(`${API_BASE_URL}/visits/${id}`, {\r\n    method: 'GET',\r\n    headers: getHeaders(),\r\n  });\r\n  \r\n  if (!response.ok) {\r\n    const errorData = await response.json().catch(() => ({}));\r\n    throw new Error(errorData.message || 'Failed to fetch visit');\r\n  }\r\n  \r\n  const data = await response.json();\r\n  setCachedData(cacheKey, data);\r\n  return data;\r\n};\r\n\r\nexport const createVisit = async (visit: any) => {\r\n  // Sanitize inputs\r\n  const sanitizedVisit = sanitizeObject(visit);\r\n  \r\n  const response = await fetch(`${API_BASE_URL}/visits`, {\r\n    method: 'POST',\r\n    headers: getHeaders(),\r\n    body: JSON.stringify(sanitizedVisit),\r\n  });\r\n  \r\n  if (!response.ok) {\r\n    const errorData = await response.json().catch(() => ({}));\r\n    throw new Error(errorData.message || 'Failed to create visit');\r\n  }\r\n  \r\n  const data = await response.json();\r\n  \r\n  // Clear cache for visits\r\n  clearCache('visits');\r\n  \r\n  return data;\r\n};\r\n\r\nexport const updateVisit = async (id: number, visit: any) => {\r\n  // Sanitize inputs\r\n  const sanitizedVisit = sanitizeObject(visit);\r\n  \r\n  const response = await fetch(`${API_BASE_URL}/visits/${id}`, {\r\n    method: 'PUT',\r\n    headers: getHeaders(),\r\n    body: JSON.stringify(sanitizedVisit),\r\n  });\r\n  \r\n  if (!response.ok) {\r\n    const errorData = await response.json().catch(() => ({}));\r\n    throw new Error(errorData.message || 'Failed to update visit');\r\n  }\r\n  \r\n  const data = await response.json();\r\n  \r\n  // Clear cache for this visit and all visits\r\n  clearCache(`visit_${id}`);\r\n  clearCache('visits');\r\n  \r\n  return data;\r\n};\r\n\r\nexport const deleteVisit = async (id: number) => {\r\n  const response = await fetch(`${API_BASE_URL}/visits/${id}`, {\r\n    method: 'DELETE',\r\n    headers: getHeaders(),\r\n  });\r\n  \r\n  if (!response.ok) {\r\n    const errorData = await response.json().catch(() => ({}));\r\n    throw new Error(errorData.message || 'Failed to delete visit');\r\n  }\r\n  \r\n  // Clear cache for this visit and all visits\r\n  clearCache(`visit_${id}`);\r\n  clearCache('visits');\r\n  \r\n  return true;\r\n};\r\n\r\n// Get visits for a specific workplace\r\nexport const getVisitsForWorkplace = async (workplaceId: number) => {\r\n  const cacheKey = `visits_workplace_${workplaceId}`;\r\n  const cached = getCachedData(cacheKey);\r\n  if (cached) {\r\n    return cached;\r\n  }\r\n  \r\n  const response = await fetch(`${API_BASE_URL}/workplaces/${workplaceId}/visits`, {\r\n    method: 'GET',\r\n    headers: getHeaders(),\r\n  });\r\n  \r\n  if (!response.ok) {\r\n    const errorData = await response.json().catch(() => ({}));\r\n    throw new Error(errorData.message || 'Failed to fetch visits for workplace');\r\n  }\r\n  \r\n  const data = await response.json();\r\n  setCachedData(cacheKey, data);\r\n  return data;\r\n};\r\n\r\n// Get visits for a specific expert\r\nexport const getVisitsForExpert = async (expertId: number) => {\r\n  const cacheKey = `visits_expert_${expertId}`;\r\n  const cached = getCachedData(cacheKey);\r\n  if (cached) {\r\n    return cached;\r\n  }\r\n  \r\n  const response = await fetch(`${API_BASE_URL}/experts/${expertId}/visits`, {\r\n    method: 'GET',\r\n    headers: getHeaders(),\r\n  });\r\n  \r\n  if (!response.ok) {\r\n    const errorData = await response.json().catch(() => ({}));\r\n    throw new Error(errorData.message || 'Failed to fetch visits for expert');\r\n  }\r\n  \r\n  const data = await response.json();\r\n  setCachedData(cacheKey, data);\r\n  return data;\r\n};"],"mappings":"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","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}