"use strict";(self.webpackChunkosgb_frontend=self.webpackChunkosgb_frontend||[]).push([[834],{834:(e,s,a)=>{a.r(s),a.d(s,{default:()=>o});var t=a(43),r=a(216),n=a(291),l=a(66),i=a(579);const o=()=>{const[e,s]=(0,t.useState)(!0),[a,o]=(0,t.useState)(""),[d,u]=(0,t.useState)(""),[c,m]=(0,t.useState)(""),[g,h]=(0,t.useState)(""),[f,p]=(0,t.useState)(!1),[x,j]=(0,t.useState)(0),v=(0,r.Zp)(),{login:N}=(0,l.A)();return(0,i.jsx)("div",{className:"login-container",children:(0,i.jsxs)("div",{className:"login-card",children:[(0,i.jsx)("h2",{children:e?"Login":"Register"}),g&&(0,i.jsx)("div",{className:"error-message",children:g}),(0,i.jsxs)("form",{onSubmit:async s=>{if(s.preventDefault(),p(!0),h(""),!e&&x<4)return h("Password must be at least 8 characters long and contain uppercase, lowercase, number, and special character"),void p(!1);try{if(e){const e=await(0,n.iD)(a,d);localStorage.setItem("authToken",e.token),N({id:e.user.id,username:e.user.username,fullName:e.user.fullName,role:e.user.role,organizationId:e.user.organizationId}),v("/")}else{const e=await(0,n.kz)({username:a,password:d,fullName:c});localStorage.setItem("authToken",e.token),N({id:e.user.id,username:e.user.username,fullName:e.user.fullName,role:e.user.role,organizationId:e.user.organizationId}),v("/")}}catch(t){h(t.message||(e?"Login failed":"Registration failed"))}finally{p(!1)}},children:[(0,i.jsxs)("div",{className:"form-group",children:[(0,i.jsx)("label",{htmlFor:"username",children:"Username"}),(0,i.jsx)("input",{type:"text",id:"username",value:a,onChange:e=>o(e.target.value),required:!0})]}),(0,i.jsxs)("div",{className:"form-group",children:[(0,i.jsx)("label",{htmlFor:"password",children:"Password"}),(0,i.jsx)("input",{type:"password",id:"password",value:d,onChange:e=>{const s=e.target.value;u(s),j((e=>{let s=0;return e.length>=8&&(s+=1),/[a-z]/.test(e)&&(s+=1),/[A-Z]/.test(e)&&(s+=1),/\d/.test(e)&&(s+=1),/[^A-Za-z0-9]/.test(e)&&(s+=1),s})(s))},required:!0}),!e&&(0,i.jsxs)("div",{className:"password-strength",children:[(0,i.jsx)("div",{className:"strength-meter",children:(0,i.jsx)("div",{className:"strength-fill",style:{width:"".concat(20*x,"%"),backgroundColor:x<3?"#ff4d4d":x<4?"#ff9900":"#00cc66"}})}),(0,i.jsxs)("div",{className:"strength-text",children:[0===x&&"Enter a password",1===x&&"Very weak",2===x&&"Weak",3===x&&"Medium",4===x&&"Strong",5===x&&"Very strong"]})]})]}),!e&&(0,i.jsxs)("div",{className:"form-group",children:[(0,i.jsx)("label",{htmlFor:"fullName",children:"Full Name"}),(0,i.jsx)("input",{type:"text",id:"fullName",value:c,onChange:e=>m(e.target.value),required:!0})]}),(0,i.jsx)("button",{type:"submit",disabled:f,children:f?"Loading...":e?"Login":"Register"})]}),(0,i.jsx)("div",{className:"toggle-form",children:(0,i.jsxs)("p",{children:[e?"Don't have an account? ":"Already have an account? ",(0,i.jsx)("button",{type:"button",onClick:()=>s(!e),className:"link-button",children:e?"Register":"Login"})]})})]})})}}}]);
//# sourceMappingURL=834.9a461c53.chunk.js.map