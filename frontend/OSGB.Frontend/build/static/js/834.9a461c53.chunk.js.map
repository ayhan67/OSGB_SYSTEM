{"version":3,"file":"static/js/834.9a461c53.chunk.js","mappings":"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","sources":["components/LoginPage.tsx"],"sourcesContent":["import React, { useState } from 'react';\r\nimport { useNavigate, Link } from 'react-router-dom';\r\nimport { login, register } from '../services/api';\r\nimport { useAuth } from '../contexts/AuthContext';\r\nimport './LoginPage.css';\r\n\r\nconst LoginPage = () => {\r\n  const [isLogin, setIsLogin] = useState(true);\r\n  const [username, setUsername] = useState('');\r\n  const [password, setPassword] = useState('');\r\n  const [fullName, setFullName] = useState('');\r\n  const [error, setError] = useState('');\r\n  const [loading, setLoading] = useState(false);\r\n  const [passwordStrength, setPasswordStrength] = useState(0);\r\n  \r\n  const navigate = useNavigate();\r\n  const { login: authLogin } = useAuth();\r\n\r\n  // Password strength validation\r\n  const validatePasswordStrength = (password: string) => {\r\n    let strength = 0;\r\n    \r\n    // Length check\r\n    if (password.length >= 8) strength += 1;\r\n    \r\n    // Contains lowercase\r\n    if (/[a-z]/.test(password)) strength += 1;\r\n    \r\n    // Contains uppercase\r\n    if (/[A-Z]/.test(password)) strength += 1;\r\n    \r\n    // Contains number\r\n    if (/\\d/.test(password)) strength += 1;\r\n    \r\n    // Contains special character\r\n    if (/[^A-Za-z0-9]/.test(password)) strength += 1;\r\n    \r\n    return strength;\r\n  };\r\n\r\n  const handlePasswordChange = (e: React.ChangeEvent<HTMLInputElement>) => {\r\n    const newPassword = e.target.value;\r\n    setPassword(newPassword);\r\n    setPasswordStrength(validatePasswordStrength(newPassword));\r\n  };\r\n\r\n  const handleSubmit = async (e: React.FormEvent) => {\r\n    e.preventDefault();\r\n    setLoading(true);\r\n    setError('');\r\n    \r\n    // Password validation for registration\r\n    if (!isLogin) {\r\n      if (passwordStrength < 4) {\r\n        setError('Password must be at least 8 characters long and contain uppercase, lowercase, number, and special character');\r\n        setLoading(false);\r\n        return;\r\n      }\r\n    }\r\n    \r\n    try {\r\n      if (isLogin) {\r\n        // Login\r\n        const response = await login(username, password);\r\n        localStorage.setItem('authToken', response.token);\r\n        authLogin({\r\n          id: response.user.id,\r\n          username: response.user.username,\r\n          fullName: response.user.fullName,\r\n          role: response.user.role,\r\n          organizationId: response.user.organizationId\r\n        });\r\n        navigate('/');\r\n      } else {\r\n        // Register\r\n        const response = await register({ username, password, fullName });\r\n        localStorage.setItem('authToken', response.token);\r\n        authLogin({\r\n          id: response.user.id,\r\n          username: response.user.username,\r\n          fullName: response.user.fullName,\r\n          role: response.user.role,\r\n          organizationId: response.user.organizationId\r\n        });\r\n        navigate('/');\r\n      }\r\n    } catch (err: any) {\r\n      setError(err.message || (isLogin ? 'Login failed' : 'Registration failed'));\r\n    } finally {\r\n      setLoading(false);\r\n    }\r\n  };\r\n\r\n  return (\r\n    <div className=\"login-container\">\r\n      <div className=\"login-card\">\r\n        <h2>{isLogin ? 'Login' : 'Register'}</h2>\r\n        \r\n        {error && <div className=\"error-message\">{error}</div>}\r\n        \r\n        <form onSubmit={handleSubmit}>\r\n          <div className=\"form-group\">\r\n            <label htmlFor=\"username\">Username</label>\r\n            <input\r\n              type=\"text\"\r\n              id=\"username\"\r\n              value={username}\r\n              onChange={(e) => setUsername(e.target.value)}\r\n              required\r\n            />\r\n          </div>\r\n          \r\n          <div className=\"form-group\">\r\n            <label htmlFor=\"password\">Password</label>\r\n            <input\r\n              type=\"password\"\r\n              id=\"password\"\r\n              value={password}\r\n              onChange={handlePasswordChange}\r\n              required\r\n            />\r\n            {!isLogin && (\r\n              <div className=\"password-strength\">\r\n                <div className=\"strength-meter\">\r\n                  <div \r\n                    className=\"strength-fill\"\r\n                    style={{\r\n                      width: `${passwordStrength * 20}%`,\r\n                      backgroundColor: passwordStrength < 3 ? '#ff4d4d' : \r\n                                      passwordStrength < 4 ? '#ff9900' : '#00cc66'\r\n                    }}\r\n                  ></div>\r\n                </div>\r\n                <div className=\"strength-text\">\r\n                  {passwordStrength === 0 && 'Enter a password'}\r\n                  {passwordStrength === 1 && 'Very weak'}\r\n                  {passwordStrength === 2 && 'Weak'}\r\n                  {passwordStrength === 3 && 'Medium'}\r\n                  {passwordStrength === 4 && 'Strong'}\r\n                  {passwordStrength === 5 && 'Very strong'}\r\n                </div>\r\n              </div>\r\n            )}\r\n          </div>\r\n          \r\n          {!isLogin && (\r\n            <div className=\"form-group\">\r\n              <label htmlFor=\"fullName\">Full Name</label>\r\n              <input\r\n                type=\"text\"\r\n                id=\"fullName\"\r\n                value={fullName}\r\n                onChange={(e) => setFullName(e.target.value)}\r\n                required\r\n              />\r\n            </div>\r\n          )}\r\n          \r\n          <button type=\"submit\" disabled={loading}>\r\n            {loading ? 'Loading...' : (isLogin ? 'Login' : 'Register')}\r\n          </button>\r\n        </form>\r\n        \r\n        <div className=\"toggle-form\">\r\n          <p>\r\n            {isLogin ? \"Don't have an account? \" : \"Already have an account? \"}\r\n            <button \r\n              type=\"button\" \r\n              onClick={() => setIsLogin(!isLogin)}\r\n              className=\"link-button\"\r\n            >\r\n              {isLogin ? 'Register' : 'Login'}\r\n            </button>\r\n          </p>\r\n        </div>\r\n      </div>\r\n    </div>\r\n  );\r\n};\r\n\r\nexport default LoginPage;"],"names":["LoginPage","isLogin","setIsLogin","useState","username","setUsername","password","setPassword","fullName","setFullName","error","setError","loading","setLoading","passwordStrength","setPasswordStrength","navigate","useNavigate","login","authLogin","useAuth","_jsx","className","children","_jsxs","onSubmit","async","e","preventDefault","response","localStorage","setItem","token","id","user","role","organizationId","register","err","message","htmlFor","type","value","onChange","target","required","newPassword","strength","length","test","validatePasswordStrength","style","width","concat","backgroundColor","disabled","onClick"],"sourceRoot":""}