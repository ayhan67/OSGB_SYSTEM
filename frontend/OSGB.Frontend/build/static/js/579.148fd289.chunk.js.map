{"version":3,"file":"static/js/579.148fd289.chunk.js","mappings":"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","sources":["components/WorkplacePage.tsx"],"sourcesContent":["import React, { useState, useEffect, useCallback } from 'react';\r\nimport { useLocation } from 'react-router-dom';\r\nimport './WorkplacePage.css';\r\nimport { getAllWorkplaces, getAllExperts, getAllDoctors, getAllDsps, updateWorkplace, deleteWorkplace } from '../services/api';\r\n\r\n// Define types\r\ninterface Workplace {\r\n  id: number;\r\n  name: string;\r\n  sskRegistrationNo: string;\r\n  riskLevel: string;\r\n  assignedExpertId: string;\r\n  assignedDoctorId: string;\r\n  assignedDspId: string;\r\n  approvalStatus: string;\r\n  // Add optional personnel objects that will be included from backend\r\n  Expert?: {\r\n    id: number;\r\n    firstName: string;\r\n    lastName: string;\r\n  } | null;\r\n  Doctor?: {\r\n    id: number;\r\n    firstName: string;\r\n    lastName: string;\r\n  } | null;\r\n  Dsp?: {\r\n    id: number;\r\n    firstName: string;\r\n    lastName: string;\r\n  } | null;\r\n}\r\n\r\nconst WorkplacePage: React.FC = () => {\r\n  console.log('WorkplacePage component rendered at:', new Date().toISOString());\r\n  const location = useLocation();\r\n  \r\n  // State declarations\r\n  const [workplaces, setWorkplaces] = useState<Workplace[]>([]);\r\n  const [allExperts, setAllExperts] = useState<any[]>([]);\r\n  const [allDoctors, setAllDoctors] = useState<any[]>([]);\r\n  const [allDsps, setAllDsps] = useState<any[]>([]);\r\n  const [success, setSuccess] = useState('');\r\n  const [error, setError] = useState('');\r\n  const [isModalOpen, setIsModalOpen] = useState<boolean>(false);\r\n  const [modalFormData, setModalFormData] = useState<Partial<Workplace>>({});\r\n  const [showDeleteConfirmation, setShowDeleteConfirmation] = useState<boolean>(false);\r\n  const [currentPage, setCurrentPage] = useState<number>(1);\r\n  const workplacesPerPage = 10;\r\n\r\n  // Function to fetch all data\r\n  const fetchAllData = useCallback(async () => {\r\n    try {\r\n      console.log('Fetching all data from backend...');\r\n      \r\n      // Fetch all data in parallel\r\n      const [workplacesData, expertsData, doctorsData, dspsData] = await Promise.all([\r\n        getAllWorkplaces(),\r\n        getAllExperts(),\r\n        getAllDoctors(),\r\n        getAllDsps()\r\n      ]);\r\n      \r\n      console.log('Received all data:', { \r\n        workplacesCount: workplacesData.length, \r\n        expertsCount: expertsData.length, \r\n        doctorsCount: doctorsData.length, \r\n        dspsCount: dspsData.length \r\n      });\r\n      \r\n      // Filter only approved workplaces (onaylandi)\r\n      const approvedWorkplaces = workplacesData.filter((workplace: Workplace) => \r\n        workplace.approvalStatus === 'onaylandi'\r\n      );\r\n      \r\n      console.log('Approved workplaces count:', approvedWorkplaces.length);\r\n      \r\n      // Update all state\r\n      setWorkplaces(approvedWorkplaces);\r\n      setAllExperts(expertsData);\r\n      setAllDoctors(doctorsData);\r\n      setAllDsps(dspsData);\r\n      console.log('State updated after data fetch');\r\n    } catch (error) {\r\n      console.error('Error fetching data:', error);\r\n      setError('Veri alınırken hata oluştu');\r\n    }\r\n  }, []);\r\n\r\n  // Load all data from backend on component mount\r\n  useEffect(() => {\r\n    console.log('WorkplacePage useEffect running - fetching all data at:', new Date().toISOString());\r\n    fetchAllData();\r\n  }, []);\r\n\r\n  // Refresh data when location changes\r\n  useEffect(() => {\r\n    console.log('Location changed to:', location.pathname, 'at:', new Date().toISOString());\r\n    fetchAllData();\r\n  }, [location.pathname]);\r\n\r\n  // Refresh data when window regains focus\r\n  useEffect(() => {\r\n    const handleFocus = () => {\r\n      console.log('Window focused, refreshing all data...');\r\n      fetchAllData();\r\n    };\r\n\r\n    window.addEventListener('focus', handleFocus);\r\n    return () => {\r\n      window.removeEventListener('focus', handleFocus);\r\n    };\r\n  }, []);\r\n  \r\n  // Clear notifications after timeout\r\n  const clearNotifications = () => {\r\n    setTimeout(() => {\r\n      setSuccess('');\r\n      setError('');\r\n    }, 3000);\r\n  };\r\n\r\n  // Function to format risk level in Turkish\r\n  const formatRiskLevel = (riskLevel: string): string => {\r\n    switch (riskLevel) {\r\n      case 'low':\r\n        return 'Az Tehlikeli';\r\n      case 'dangerous':\r\n        return 'Tehlikeli';\r\n      case 'veryDangerous':\r\n        return 'Çok Tehlikeli';\r\n      default:\r\n        return 'Belirtilmemiş';\r\n    }\r\n  };\r\n  \r\n  // Function to get expert name by ID\r\n  const getExpertName = (expertId: string, workplace?: Workplace) => {\r\n    // First try to get name from included data in workplace\r\n    if (workplace && workplace.Expert) {\r\n      console.log('Using included Expert data:', workplace.Expert);\r\n      // Check if firstName and lastName exist\r\n      if (workplace.Expert.firstName && workplace.Expert.lastName) {\r\n        return `${workplace.Expert.firstName} ${workplace.Expert.lastName}`;\r\n      }\r\n    }\r\n    \r\n    // Fallback to lookup in allExperts array\r\n    if (!expertId) return 'Atanmamış';\r\n    const expert = allExperts.find(expert => expert.id === parseInt(expertId));\r\n    if (expert && expert.firstName && expert.lastName) {\r\n      return `${expert.firstName} ${expert.lastName}`;\r\n    }\r\n    return 'Bilinmeyen Uzman';\r\n  };\r\n  \r\n  // Function to get doctor name by ID\r\n  const getDoctorName = (doctorId: string, workplace?: Workplace) => {\r\n    // First try to get name from included data in workplace\r\n    if (workplace && workplace.Doctor) {\r\n      console.log('Using included Doctor data:', workplace.Doctor);\r\n      // Check if firstName and lastName exist\r\n      if (workplace.Doctor.firstName && workplace.Doctor.lastName) {\r\n        return `${workplace.Doctor.firstName} ${workplace.Doctor.lastName}`;\r\n      }\r\n    }\r\n    \r\n    // Fallback to lookup in allDoctors array\r\n    if (!doctorId) return 'Atanmamış';\r\n    const doctor = allDoctors.find(doctor => doctor.id === parseInt(doctorId));\r\n    if (doctor && doctor.firstName && doctor.lastName) {\r\n      return `${doctor.firstName} ${doctor.lastName}`;\r\n    }\r\n    return 'Bilinmeyen Hekim';\r\n  };\r\n  \r\n  // Function to get DSP name by ID\r\n  const getDspName = (dspId: string, workplace?: Workplace) => {\r\n    // First try to get name from included data in workplace\r\n    if (workplace && workplace.Dsp) {\r\n      console.log('Using included Dsp data:', workplace.Dsp);\r\n      // Check if firstName and lastName exist\r\n      if (workplace.Dsp.firstName && workplace.Dsp.lastName) {\r\n        return `${workplace.Dsp.firstName} ${workplace.Dsp.lastName}`;\r\n      }\r\n    }\r\n    \r\n    // Fallback to lookup in allDsps array\r\n    if (!dspId) return 'Atanmamış';\r\n    const dsp = allDsps.find(dsp => dsp.id === parseInt(dspId));\r\n    if (dsp && dsp.firstName && dsp.lastName) {\r\n      return `${dsp.firstName} ${dsp.lastName}`;\r\n    }\r\n    return 'Bilinmeyen DSP';\r\n  };\r\n  \r\n  const handleRowClick = (workplace: Workplace) => {\r\n    setModalFormData(workplace);\r\n    setIsModalOpen(true);\r\n    // Prevent background scrolling when modal is open\r\n    document.body.style.overflow = 'hidden';\r\n  };\r\n  \r\n  const handleModalChange = (e: React.ChangeEvent<HTMLInputElement | HTMLTextAreaElement | HTMLSelectElement>) => {\r\n    const { name, value } = e.target;\r\n    \r\n    setModalFormData(prev => ({\r\n      ...prev,\r\n      [name]: value\r\n    }));\r\n  };\r\n  \r\n  const handleModalSubmit = async (e: React.FormEvent) => {\r\n    e.preventDefault();\r\n    \r\n    try {\r\n      if (modalFormData.id) {\r\n        // Ensure all required fields are included and handle null values for assigned IDs\r\n        const workplaceData = {\r\n          ...modalFormData,\r\n          // Handle null values for assigned IDs\r\n          assignedExpertId: modalFormData.assignedExpertId || null,\r\n          assignedDoctorId: modalFormData.assignedDoctorId || null,\r\n          assignedDspId: modalFormData.assignedDspId || null\r\n        };\r\n        \r\n        // Update existing workplace\r\n        const updatedWorkplace = await updateWorkplace(modalFormData.id, workplaceData);\r\n        \r\n        // Show success message\r\n        setSuccess('İş yeri başarıyla güncellendi!');\r\n        \r\n        // Close modal first\r\n        setIsModalOpen(false);\r\n        \r\n        // Refresh all data from backend to ensure consistency\r\n        await fetchAllData();\r\n        \r\n        // Clear notifications\r\n        clearNotifications();\r\n      }\r\n    } catch (error: any) {\r\n      console.error('Error updating workplace:', error);\r\n      // Provide more specific error message\r\n      if (error.message) {\r\n        setError(`İş yeri güncellenirken hata oluştu: ${error.message}`);\r\n      } else {\r\n        setError('İş yeri güncellenirken hata oluştu');\r\n      }\r\n      clearNotifications();\r\n    }\r\n  };\r\n\r\n  const handleDeleteWorkplace = () => {\r\n    // Show confirmation dialog before deleting\r\n    setShowDeleteConfirmation(true);\r\n  };\r\n\r\n  // Function to confirm deletion\r\n  const confirmDeleteWorkplace = async () => {\r\n    try {\r\n      if (modalFormData.id) {\r\n        // Delete from backend\r\n        await deleteWorkplace(modalFormData.id);\r\n        \r\n        // Show success message\r\n        setSuccess('İş yeri başarıyla silindi!');\r\n        \r\n        // Close confirmation dialog and modal\r\n        setShowDeleteConfirmation(false);\r\n        closeModal();\r\n        \r\n        // Refresh all data from backend to ensure consistency\r\n        await fetchAllData();\r\n        \r\n        // Clear notifications\r\n        clearNotifications();\r\n      } else {\r\n        setShowDeleteConfirmation(false);\r\n        closeModal();\r\n      }\r\n    } catch (error: any) {\r\n      console.error('Error deleting workplace:', error);\r\n      // Provide more specific error message\r\n      if (error.message) {\r\n        setError(`İş yeri silinirken hata oluştu: ${error.message}`);\r\n      } else {\r\n        setError('İş yeri silinirken hata oluştu');\r\n      }\r\n      clearNotifications();\r\n    }\r\n  };\r\n\r\n  // Function to cancel deletion\r\n  const cancelDeleteWorkplace = () => {\r\n    setShowDeleteConfirmation(false);\r\n  };\r\n\r\n  // Function to close modal\r\n  const closeModal = () => {\r\n    setIsModalOpen(false);\r\n    setModalFormData({});\r\n    // Allow background scrolling when modal is closed\r\n    document.body.style.overflow = 'auto';\r\n  };\r\n  \r\n  // Pagination functions\r\n  const indexOfLastWorkplace = currentPage * workplacesPerPage;\r\n  const indexOfFirstWorkplace = indexOfLastWorkplace - workplacesPerPage;\r\n  const currentWorkplaces = workplaces.slice(indexOfFirstWorkplace, indexOfLastWorkplace);\r\n  const totalPages = Math.ceil(workplaces.length / workplacesPerPage);\r\n  \r\n  const handlePageChange = (pageNumber: number) => {\r\n    setCurrentPage(pageNumber);\r\n  };\r\n\r\n  return (\r\n    <div className=\"workplace-page-container\">\r\n      {/* Popup notifications */}\r\n      {success && (\r\n        <div className=\"popup-notification alert alert-info\">\r\n          {success}\r\n        </div>\r\n      )}\r\n      {error && (\r\n        <div className=\"popup-notification alert alert-warning\">\r\n          {error}\r\n        </div>\r\n      )}\r\n      \r\n      {/* Delete Confirmation Popup */}\r\n      {showDeleteConfirmation && (\r\n        <div className=\"popup-overlay\" onClick={cancelDeleteWorkplace}>\r\n          <div className=\"popup-content\" onClick={(e) => e.stopPropagation()}>\r\n            <div className=\"popup-header\">\r\n              <h3>Kayıt Silme Onayı</h3>\r\n              <button className=\"popup-close\" onClick={cancelDeleteWorkplace}>×</button>\r\n            </div>\r\n            <div className=\"popup-body\">\r\n              <p>Kayıdı gerçekten silmek istiyor musunuz?</p>\r\n            </div>\r\n            <div className=\"popup-footer\">\r\n              <button className=\"btn btn-secondary\" onClick={cancelDeleteWorkplace}>İptal</button>\r\n              <button className=\"btn btn-danger\" onClick={confirmDeleteWorkplace}>Sil</button>\r\n            </div>\r\n          </div>\r\n        </div>\r\n      )}\r\n\r\n      <div className=\"workplace-page-content\">\r\n        {/* Workplaces list */}\r\n        <div className=\"workplaces-container\">\r\n          <div className=\"header-row\">\r\n            <div className=\"header-cell\">İş Yeri Adı</div>\r\n            <div className=\"header-cell\">Sicil No</div>\r\n            <div className=\"header-cell\">Tehlike Sınıfı</div>\r\n            <div className=\"header-cell\">Atanan Uzman</div>\r\n            <div className=\"header-cell\">Atanan Hekim</div>\r\n            <div className=\"header-cell\">Atanan DSP</div>\r\n          </div>\r\n          \r\n          <div className=\"workplaces-list\">\r\n            {currentWorkplaces.map(workplace => (\r\n              <div \r\n                key={workplace.id} \r\n                className=\"workplace-row\"\r\n                onClick={() => handleRowClick(workplace)}\r\n              >\r\n                <div className=\"workplace-cell\">{workplace.name}</div>\r\n                <div className=\"workplace-cell\">{workplace.sskRegistrationNo}</div>\r\n                <div className=\"workplace-cell\">{formatRiskLevel(workplace.riskLevel)}</div>\r\n                <div className=\"workplace-cell\">{getExpertName(workplace.assignedExpertId, workplace)}</div>\r\n                <div className=\"workplace-cell\">{getDoctorName(workplace.assignedDoctorId, workplace)}</div>\r\n                <div className=\"workplace-cell\">{getDspName(workplace.assignedDspId, workplace)}</div>\r\n              </div>\r\n            ))}\r\n            \r\n            {workplaces.length === 0 && (\r\n              <div className=\"no-workplaces\">\r\n                Onaylanmış iş yeri bulunmamaktadır.\r\n              </div>\r\n            )}\r\n          </div>\r\n          \r\n          {/* Pagination */}\r\n          {totalPages > 1 && (\r\n            <div className=\"pagination\">\r\n              <button \r\n                className=\"pagination-button\"\r\n                onClick={() => handlePageChange(currentPage > 1 ? currentPage - 1 : 1)}\r\n                disabled={currentPage === 1}\r\n              >\r\n                Önceki\r\n              </button>\r\n              <span className=\"pagination-info\">\r\n                Sayfa {currentPage} / {totalPages}\r\n              </span>\r\n              <button \r\n                className=\"pagination-button\"\r\n                onClick={() => handlePageChange(currentPage < totalPages ? currentPage + 1 : totalPages)}\r\n                disabled={currentPage === totalPages}\r\n              >\r\n                Sonraki\r\n              </button>\r\n            </div>\r\n          )}\r\n        </div>\r\n      </div>\r\n      \r\n      {/* Modal for viewing/editing workplace */}\r\n      {isModalOpen && (\r\n        <div className=\"modal-overlay\" onClick={closeModal}>\r\n          <div className=\"modal-content\" onClick={(e) => e.stopPropagation()}>\r\n            <div className=\"modal-header\">\r\n              <h3>Kayıtlı Uzman Kartı</h3>\r\n              <button className=\"modal-close\" onClick={closeModal}>×</button>\r\n            </div>\r\n            <div className=\"modal-body\">\r\n              <form onSubmit={handleModalSubmit}>\r\n                <div className=\"form-row\">\r\n                  <div className=\"form-col\">\r\n                    <div className=\"form-group\">\r\n                      <label className=\"form-label\">İş Yeri Adı:</label>\r\n                      <input\r\n                        type=\"text\"\r\n                        name=\"name\"\r\n                        value={modalFormData.name || ''}\r\n                        onChange={handleModalChange}\r\n                        className=\"form-input\"\r\n                        readOnly\r\n                      />\r\n                    </div>\r\n                  </div>\r\n                  <div className=\"form-col\">\r\n                    <div className=\"form-group\">\r\n                      <label className=\"form-label\">SGK İşyeri Sicil No:</label>\r\n                      <input\r\n                        type=\"text\"\r\n                        name=\"sskRegistrationNo\"\r\n                        value={modalFormData.sskRegistrationNo || ''}\r\n                        onChange={handleModalChange}\r\n                        className=\"form-input\"\r\n                        readOnly\r\n                      />\r\n                    </div>\r\n                  </div>\r\n                </div>\r\n                \r\n                <div className=\"form-row\">\r\n                  <div className=\"form-col\">\r\n                    <div className=\"form-group\">\r\n                      <label className=\"form-label\">Tehlike Sınıfı:</label>\r\n                      <input\r\n                        type=\"text\"\r\n                        name=\"riskLevel\"\r\n                        value={modalFormData.riskLevel ? formatRiskLevel(modalFormData.riskLevel) : ''}\r\n                        onChange={handleModalChange}\r\n                        className=\"form-input\"\r\n                        readOnly\r\n                      />\r\n                    </div>\r\n                  </div>\r\n                </div>\r\n                \r\n                <div className=\"form-row\">\r\n                  <div className=\"form-col\">\r\n                    <div className=\"form-group\">\r\n                      <label className=\"form-label\">Atanan Uzman:</label>\r\n                      <select\r\n                        name=\"assignedExpertId\"\r\n                        value={modalFormData.assignedExpertId || ''}\r\n                        onChange={handleModalChange}\r\n                        className=\"form-select\"\r\n                      >\r\n                        <option value=\"\">Seçiniz</option>\r\n                        {allExperts.map(expert => (\r\n                          <option key={expert.id} value={expert.id}>\r\n                            {expert.firstName} {expert.lastName}\r\n                          </option>\r\n                        ))}\r\n                      </select>\r\n                    </div>\r\n                  </div>\r\n                  <div className=\"form-col\">\r\n                    <div className=\"form-group\">\r\n                      <label className=\"form-label\">Atanan Hekim:</label>\r\n                      <select\r\n                        name=\"assignedDoctorId\"\r\n                        value={modalFormData.assignedDoctorId || ''}\r\n                        onChange={handleModalChange}\r\n                        className=\"form-select\"\r\n                      >\r\n                        <option value=\"\">Seçiniz</option>\r\n                        {allDoctors.map(doctor => (\r\n                          <option key={doctor.id} value={doctor.id}>\r\n                            {doctor.firstName} {doctor.lastName}\r\n                          </option>\r\n                        ))}\r\n                      </select>\r\n                    </div>\r\n                  </div>\r\n                </div>\r\n                \r\n                <div className=\"form-row\">\r\n                  <div className=\"form-col\">\r\n                    <div className=\"form-group\">\r\n                      <label className=\"form-label\">Atanan DSP:</label>\r\n                      <select\r\n                        name=\"assignedDspId\"\r\n                        value={modalFormData.assignedDspId || ''}\r\n                        onChange={handleModalChange}\r\n                        className=\"form-select\"\r\n                      >\r\n                        <option value=\"\">Seçiniz</option>\r\n                        {allDsps.map(dsp => (\r\n                          <option key={dsp.id} value={dsp.id}>\r\n                            {dsp.firstName} {dsp.lastName}\r\n                          </option>\r\n                        ))}\r\n                      </select>\r\n                    </div>\r\n                  </div>\r\n                </div>\r\n                \r\n                <div className=\"modal-actions\">\r\n                  <button type=\"button\" className=\"btn btn-danger\" onClick={handleDeleteWorkplace}>\r\n                    Sil\r\n                  </button>\r\n                  <button type=\"button\" className=\"btn btn-secondary\" onClick={closeModal}>\r\n                    İptal\r\n                  </button>\r\n                  <button type=\"submit\" className=\"btn btn-primary\">\r\n                    Güncelle\r\n                  </button>\r\n                </div>\r\n              </form>\r\n            </div>\r\n          </div>\r\n        </div>\r\n      )}\r\n    </div>\r\n  );\r\n};\r\n\r\nexport default WorkplacePage;"],"names":["WorkplacePage","console","log","Date","toISOString","location","useLocation","workplaces","setWorkplaces","useState","allExperts","setAllExperts","allDoctors","setAllDoctors","allDsps","setAllDsps","success","setSuccess","error","setError","isModalOpen","setIsModalOpen","modalFormData","setModalFormData","showDeleteConfirmation","setShowDeleteConfirmation","currentPage","setCurrentPage","fetchAllData","useCallback","async","workplacesData","expertsData","doctorsData","dspsData","Promise","all","getAllWorkplaces","getAllExperts","getAllDoctors","getAllDsps","workplacesCount","length","expertsCount","doctorsCount","dspsCount","approvedWorkplaces","filter","workplace","approvalStatus","useEffect","pathname","handleFocus","window","addEventListener","removeEventListener","clearNotifications","setTimeout","formatRiskLevel","riskLevel","getExpertName","expertId","Expert","firstName","lastName","concat","expert","find","id","parseInt","getDoctorName","doctorId","Doctor","doctor","getDspName","dspId","Dsp","dsp","handleModalChange","e","name","value","target","prev","_objectSpread","cancelDeleteWorkplace","closeModal","document","body","style","overflow","indexOfLastWorkplace","indexOfFirstWorkplace","currentWorkplaces","slice","totalPages","Math","ceil","handlePageChange","pageNumber","_jsxs","className","children","_jsx","onClick","stopPropagation","deleteWorkplace","message","map","handleRowClick","sskRegistrationNo","assignedExpertId","assignedDoctorId","assignedDspId","disabled","onSubmit","preventDefault","workplaceData","updateWorkplace","type","onChange","readOnly","handleDeleteWorkplace"],"sourceRoot":""}